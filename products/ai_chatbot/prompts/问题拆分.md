# 问题拆分提示词

> **版本**: v2.0
> **更新**: 2025-12-29

## 任务

将用户输入拆分为**独立可回答**的子问题。

**核心原则**：宁可少拆，不要过度拆分。

---

## 输入

用户问题：{{user_input}}
历史对话：{{chat_history}}

---

## 拆分规则

### ✅ 需要拆分的情况

只有当用户问题包含**多个不同主题**时才拆分：

| 用户输入 | 拆分结果 | 原因 |
|---------|---------|------|
| "续航多少？运费怎么算？" | ["续航多少?", "运费怎么算?"] | 产品参数 + 物流政策，不同主题 |
| "推荐一款车，怎么退货？" | ["推荐一款车", "怎么退货?"] | 产品推荐 + 售后政策，不同主题 |
| "电池能拆吗？防水吗？" | ["电池能拆吗?", "防水吗?"] | 电池问题 + 防水问题，不同主题 |

### ❌ 不要拆分的情况

以下情况保持为**一个完整问题**：

| 用户输入 | 保持原样 | 原因 |
|---------|---------|------|
| "C11 Pro和T2哪个好？" | ["C11 Pro和T2哪个好?"] | 对比问题是一个完整意图 |
| "C11 Pro和T2分别多少钱？" | ["C11 Pro和T2分别多少钱?"] | 询问多产品价格是一个问题 |
| "C11 Pro续航、速度、重量是多少？" | ["C11 Pro续航、速度、重量是多少?"] | 同一产品的多个参数，可一起回答 |
| "充电要多久？怎么充？" | ["充电要多久?怎么充?"] | 同一主题（充电）的关联问题 |
| "电池坏了怎么办？保修吗？" | ["电池坏了怎么办?保修吗?"] | 同一问题的追问 |

### 判断标准

**问自己**：这两个问题能用**同一段话**回答吗？

- 能 → 不拆分
- 不能 → 拆分

---

## 省略补全

如果用户输入有省略，先补全再判断是否拆分：

| 用户输入 | 上下文 | 补全后 |
|---------|--------|--------|
| "电池呢？" | 之前问C11 Pro | "C11 Pro的电池怎么样?" |
| "那T2呢？" | 之前问C11价格 | "T2的价格是多少?" |

---

## 输出格式

**只输出 JSON 数组，不要任何解释**

```json
["子问题1", "子问题2"]
```

或单个问题时：

```json
["完整问题"]
```

---

## 示例

### 不同主题 → 拆分

```
输入: "C11 Pro续航多少？运费怎么算？"
输出: ["C11 Pro续航多少?", "运费怎么算?"]
```

### 对比问题 → 不拆分

```
输入: "C11 Pro和T2哪个续航长？分别多少钱？"
输出: ["C11 Pro和T2哪个续航长?", "C11 Pro和T2分别多少钱?"]
```
（注意：价格问题保持"分别多少钱"，不拆成两个单独产品）

### 同主题多参数 → 不拆分

```
输入: "C11 Pro的续航、速度、重量分别是多少？"
输出: ["C11 Pro的续航、速度、重量分别是多少?"]
```

### 关联问题 → 不拆分

```
输入: "电池充不进电怎么办？还在保修期吗？"
输出: ["电池充不进电怎么办?还在保修期吗?"]
```

---

## 执行

根据以上规则，输出拆分后的 JSON 数组：
