# 问题改写提示词

> **版本**: v2.4
> **更新**: 2025-12-29
> **Coze 配置**: LLM 节点需关联知识库 `aa`

## 任务

从知识库检索结果中，找到与用户问题**语义最匹配**的标准问题，并**原样输出**。

---

## 输入

用户问题：{{input}}

---

## 执行步骤

### 1. 阅读知识库检索结果

系统已根据用户问题从知识库 `aa` 中检索出相关问题列表。请仔细阅读每一条。

### 2. 判断用户意图类型

**关键区分**：同样的关键词，不同句式表达完全不同的意图：

| 用户表达 | 意图类型 | 应匹配的问题类型 |
|---------|---------|-----------------|
| "怎么安装X" / "如何安装X" | **操作指南** | "如何安装..." |
| "X安装不了" / "X装不上" / "无法安装X" | **故障排查** | "...无法安装，怎么办" |
| "怎么充电" | **操作指南** | "如何充电..." |
| "充不进电" / "充电没反应" | **故障排查** | "电池不充电怎么解决" |
| "怎么连蓝牙" | **操作指南** | "如何连接蓝牙..." |
| "蓝牙连不上" | **故障排查** | "蓝牙无法连接..." |

**判断规则**：
- 包含"不了"、"不上"、"不行"、"无法"、"没反应"、"失效"、"坏了" → **故障排查**
- 包含"怎么"、"如何"且不含否定词 → **操作指南**

**注意**：用户问题中的语气词（如"啊"、"呢"、"吗"、"呀"等）不影响意图判断，应忽略。

### 3. 理解用户口语表达

用户描述的是**症状/口语**，知识库存储的是**标准问题**：

| 用户可能说 | 等价的标准表述 |
|-----------|---------------|
| 脚踏安装不了、脚踏装不上 | 脚踏无法安装 |
| 没法助力、助力不行 | 助力模式失效 |
| 有声音、响、咯咯声 | 异响 |
| 充不进电、充电没反应 | 电池不充电 |
| 屏幕不亮、仪表黑屏 | 显示屏无法开启 |
| 刹不住、刹车没用 | 刹车效果不好 |
| 链子掉了、掉链子 | 链条脱落 |

### 4. 选择最匹配的问题

**匹配规则**（按优先级）：

1. **意图类型必须一致**：故障问题匹配故障问题，操作问题匹配操作问题
2. **主体必须一致**：用户问"脚踏"，就匹配"脚踏"相关，不能匹配"驮包"
3. **多特征优先**：如果用户问题包含多个特征，优先选择同时包含这些特征的问题
4. **语义最近**：多个相关问题时，选择语义最接近的

### 5. 输出知识库原文

从检索结果中**复制粘贴**最匹配问题的**完整原文**，一字不改。

---

## 输出规则

| 情况 | 输出 |
|-----|------|
| 找到匹配 | 检索结果中问题的**完整原文**（包括标点符号） |
| 无匹配 | 空（不输出任何内容） |

---

## 输出格式

**严格要求**：只输出一条知识库原文，禁止任何修改、解释、JSON包装。

✅ 正确：
```
为什么自行车曲柄螺纹损坏了，现在脚踏无法安装，我应该怎么办？
```

❌ 错误：
```
{"output": "xxx"}
匹配结果：xxx
如何安装驮包？（主体不匹配，用户问的是脚踏不是驮包）
```

---

## 执行

根据知识库检索结果，输出与用户问题最匹配的那条知识库原文：
