# Fiido æ™ºèƒ½æœåŠ¡å¹³å° - é¡¹ç›®æ¶æ„æ¦‚è§ˆ

> **æœ€åæ›´æ–°**ï¼š2025-12-23
> **æ–‡æ¡£ç‰ˆæœ¬**ï¼šv8.0
> **ä»£ç ç‰ˆæœ¬**ï¼šv7.6.18

---

## ä¸€ã€é¡¹ç›®ç®€ä»‹

Fiido æ™ºèƒ½æœåŠ¡å¹³å°æ˜¯é¢å‘è·¨å¢ƒç”µå•†çš„ä¸€ç«™å¼ AI è§£å†³æ–¹æ¡ˆï¼Œé‡‡ç”¨**å¾®æœåŠ¡æ¶æ„**è®¾è®¡ï¼Œæ¯ä¸ªäº§å“ç‹¬ç«‹éƒ¨ç½²è¿è¡Œã€‚

**å½“å‰éƒ¨ç½²æ¨¡å¼**ï¼šå¾®æœåŠ¡æ¨¡å¼
- æ¯ä¸ªäº§å“ç‹¬ç«‹è¿›ç¨‹ã€ç‹¬ç«‹ç«¯å£
- é€šè¿‡ nginx åå‘ä»£ç†ç»Ÿä¸€å…¥å£
- systemd ç®¡ç†æœåŠ¡ç”Ÿå‘½å‘¨æœŸ

---

## äºŒã€æŠ€æœ¯æ¶æ„

### 2.1 å¾®æœåŠ¡æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        nginx (443/80)                            â”‚
â”‚                     ai.fiido.com SSL ç»ˆç»“                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  /chat-test  â†’  /var/www/fiido-frontend (AIå®¢æœå‰ç«¯)             â”‚
â”‚  /workbench  â†’  /var/www/fiido-workbench (åå¸­å·¥ä½œå°å‰ç«¯)         â”‚
â”‚  /assets/    â†’  /opt/fiido-ai-service/assets/ (é™æ€èµ„æº)         â”‚
â”‚  /api/*      â†’  127.0.0.1:8000 (AIå®¢æœAPI)                       â”‚
â”‚  /workbench-api/* â†’ 127.0.0.1:8002 (åå¸­å·¥ä½œå°API)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AI æ™ºèƒ½å®¢æœ      â”‚                      â”‚   åå¸­å·¥ä½œå°       â”‚
â”‚   Port: 8000      â”‚                      â”‚   Port: 8002      â”‚
â”‚   fiido-ai-chatbotâ”‚                      â”‚   fiido-agent-    â”‚
â”‚   .service        â”‚                      â”‚   workbench.serviceâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                                          â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Services æœåŠ¡å±‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚Shopify â”‚ â”‚ Email  â”‚ â”‚ Coze   â”‚ â”‚ Ticket â”‚ â”‚Session â”‚ ...    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Infrastructure åŸºç¡€è®¾æ–½å±‚                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚Databaseâ”‚ â”‚Bootstrapâ”‚ â”‚Schedulerâ”‚ â”‚Securityâ”‚ â”‚Monitoringâ”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Redis + PgSQL  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ä¾èµ–è§„åˆ™

| ä¾èµ–æ–¹å‘ | æ˜¯å¦å…è®¸ |
|----------|----------|
| products â†’ services | âœ… å…è®¸ |
| products â†’ infrastructure | âœ… å…è®¸ |
| services â†’ infrastructure | âœ… å…è®¸ |
| services â†’ products | âŒ **ç¦æ­¢** |
| infrastructure â†’ ä¸Šå±‚ | âŒ **ç¦æ­¢** |
| products ä¹‹é—´ | âŒ **ç¦æ­¢** |

---

## ä¸‰ã€ç›®å½•ç»“æ„

```
/opt/fiido-ai-service/                   # æœåŠ¡å™¨éƒ¨ç½²ç›®å½•
â”‚
â”œâ”€â”€ ã€æ ¸å¿ƒæ–‡ä»¶ã€‘
â”œâ”€â”€ CLAUDE.md                    # æœ€é«˜å¼€å‘è§„èŒƒ
â”œâ”€â”€ PROJECT_OVERVIEW.md          # æœ¬æ–‡æ¡£
â”œâ”€â”€ requirements.txt             # Python ä¾èµ–
â”œâ”€â”€ .env                         # ç¯å¢ƒé…ç½®
â”‚
â”œâ”€â”€ ã€ä¸‰å±‚æ¶æ„ã€‘
â”œâ”€â”€ products/                    # äº§å“å±‚ï¼ˆç‹¬ç«‹å¾®æœåŠ¡ï¼‰
â”‚   â”œâ”€â”€ ai_chatbot/             # AI æ™ºèƒ½å®¢æœ â†’ Port 8000
â”‚   â”‚   â”œâ”€â”€ main.py            # å¯åŠ¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ routes.py          # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ handlers/          # è¯·æ±‚å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ frontend/dist/     # å‰ç«¯æ„å»ºäº§ç‰©
â”‚   â”‚   â””â”€â”€ memory-bank/       # å¼€å‘æ–‡æ¡£
â”‚   â”œâ”€â”€ agent_workbench/        # åå¸­å·¥ä½œå° â†’ Port 8002
â”‚   â”‚   â”œâ”€â”€ main.py            # å¯åŠ¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ routes.py          # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ handlers/          # è¯·æ±‚å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ frontend/dist/     # å‰ç«¯æ„å»ºäº§ç‰©
â”‚   â”‚   â””â”€â”€ memory-bank/       # å¼€å‘æ–‡æ¡£
â”‚   â”œâ”€â”€ customer_portal/        # å®¢æˆ·æ§åˆ¶å°ï¼ˆè§„åˆ’ä¸­ï¼‰
â”‚   â””â”€â”€ notification/           # ç‰©æµé€šçŸ¥ï¼ˆè§„åˆ’ä¸­ï¼‰
â”‚
â”œâ”€â”€ services/                    # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ bootstrap/              # ä¾èµ–æ³¨å…¥æ³¨å†Œ
â”‚   â”œâ”€â”€ shopify/                # Shopify è®¢å•æœåŠ¡
â”‚   â”œâ”€â”€ email/                  # é‚®ä»¶æœåŠ¡
â”‚   â”œâ”€â”€ coze/                   # Coze AI æœåŠ¡
â”‚   â”œâ”€â”€ ticket/                 # å·¥å•æœåŠ¡
â”‚   â”œâ”€â”€ session/                # ä¼šè¯æœåŠ¡
â”‚   â”œâ”€â”€ asset/                  # ç´ ææœåŠ¡
â”‚   â”œâ”€â”€ tracking/               # ç‰©æµè¿½è¸ªæœåŠ¡
â”‚   â””â”€â”€ billing/                # è®¡è´¹æœåŠ¡ï¼ˆè§„åˆ’ä¸­ï¼‰
â”‚
â”œâ”€â”€ infrastructure/              # åŸºç¡€è®¾æ–½å±‚
â”‚   â”œâ”€â”€ bootstrap/              # å¯åŠ¨å¼•å¯¼ï¼ˆç»„ä»¶å·¥å‚ï¼‰
â”‚   â”œâ”€â”€ database/               # æ•°æ®åº“ï¼ˆPostgreSQL + Redisï¼‰
â”‚   â”œâ”€â”€ scheduler/              # å®šæ—¶ä»»åŠ¡
â”‚   â”œâ”€â”€ logging/                # æ—¥å¿—
â”‚   â”œâ”€â”€ monitoring/             # ç›‘æ§
â”‚   â””â”€â”€ security/               # å®‰å…¨è®¤è¯
â”‚
â”œâ”€â”€ ã€èµ„æºä¸é…ç½®ã€‘
â”œâ”€â”€ assets/                      # é™æ€èµ„æºï¼ˆäº§å“å›¾ç‰‡ç­‰ï¼‰
â”œâ”€â”€ config/                      # é…ç½®æ–‡ä»¶ï¼ˆç§é’¥ç­‰ï¼‰
â”œâ”€â”€ venv/                        # Python è™šæ‹Ÿç¯å¢ƒ
â”‚
â”œâ”€â”€ ã€è¿ç»´ä¸æ–‡æ¡£ã€‘
â”œâ”€â”€ deploy/                      # éƒ¨ç½²é…ç½®
â””â”€â”€ docs/                        # æ–‡æ¡£
```

---

## å››ã€äº§å“æ¸…å•

| äº§å“ | ç›®å½• | ç«¯å£ | systemd æœåŠ¡ | çŠ¶æ€ |
|------|------|------|--------------|------|
| AI æ™ºèƒ½å®¢æœ | products/ai_chatbot | 8000 | fiido-ai-chatbot | âœ… å·²ä¸Šçº¿ |
| åå¸­å·¥ä½œå° | products/agent_workbench | 8002 | fiido-agent-workbench | âœ… å·²ä¸Šçº¿ |
| å®¢æˆ·æ§åˆ¶å° | products/customer_portal | - | - | ğŸ“‹ è§„åˆ’ä¸­ |
| ç‰©æµé€šçŸ¥ | products/notification | - | - | ğŸ“‹ è§„åˆ’ä¸­ |

---

## äº”ã€æœåŠ¡æ¸…å•

| æœåŠ¡ | ç›®å½• | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|------|
| ä¾èµ–æ³¨å…¥ | services/bootstrap | âœ… å·²å®Œæˆ | æœåŠ¡æ³¨å†Œåˆ°åŸºç¡€è®¾æ–½å±‚ |
| Shopify è®¢å• | services/shopify | âœ… å·²å®Œæˆ | å¤šç«™ç‚¹è®¢å•æŸ¥è¯¢ã€ç¼“å­˜é¢„çƒ­ |
| é‚®ä»¶æœåŠ¡ | services/email | âœ… å·²å®Œæˆ | SMTP é‚®ä»¶å‘é€ |
| Coze AI | services/coze | âœ… å·²å®Œæˆ | AI å¯¹è¯æœåŠ¡ã€JWTç­¾å |
| å·¥å•æœåŠ¡ | services/ticket | âœ… å·²å®Œæˆ | å·¥å•ç®¡ç†ã€ååŠ©è¯·æ±‚ |
| ä¼šè¯æœåŠ¡ | services/session | âœ… å·²å®Œæˆ | ä¼šè¯çŠ¶æ€ç®¡ç† |
| ç´ ææœåŠ¡ | services/asset | âœ… å·²å®Œæˆ | äº§å“å›¾ç‰‡åŒ¹é…ã€CDNç´ æ |
| ç‰©æµè¿½è¸ª | services/tracking | âœ… å·²å®Œæˆ | 17track API é›†æˆ |
| è®¡è´¹æœåŠ¡ | services/billing | ğŸ“‹ è§„åˆ’ä¸­ | å¥—é¤ã€è®¢é˜…ã€ç”¨é‡ |

---

## å…­ã€åŸºç¡€è®¾æ–½æ¸…å•

| ç»„ä»¶ | ç›®å½• | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|------|
| å¯åŠ¨å¼•å¯¼ | infrastructure/bootstrap | âœ… å·²å®Œæˆ | ç»„ä»¶å·¥å‚ã€ä¾èµ–æ³¨å…¥ |
| æ•°æ®åº“ | infrastructure/database | âœ… å·²å®Œæˆ | PostgreSQL + Redis åŒå†™ |
| å®‰å…¨è®¤è¯ | infrastructure/security | âœ… å·²å®Œæˆ | JWTç­¾åã€åå¸­è®¤è¯ |
| ç›‘æ§ | infrastructure/monitoring | âœ… å·²å®Œæˆ | CDN å¥åº·æ£€æŸ¥ |
| å®šæ—¶ä»»åŠ¡ | infrastructure/scheduler | âš™ï¸ å¾…å®Œå–„ | APScheduler |
| æ—¥å¿— | infrastructure/logging | âš™ï¸ å¾…å®Œå–„ | æ—¥å¿—é…ç½® |

---

## ä¸ƒã€éƒ¨ç½²ä¿¡æ¯

### 7.1 æœåŠ¡å™¨é…ç½®

| é…ç½®é¡¹ | å€¼ |
|--------|-----|
| æœåŠ¡å™¨ IP | 8.211.27.199 |
| é¡¹ç›®ç›®å½• | /opt/fiido-ai-service/ |
| è™šæ‹Ÿç¯å¢ƒ | /opt/fiido-ai-service/venv/ |
| Python ç‰ˆæœ¬ | 3.10 |

### 7.2 å‰ç«¯éƒ¨ç½²ä½ç½®

| äº§å“ | éƒ¨ç½²ç›®å½• | è®¿é—®è·¯å¾„ |
|------|----------|----------|
| AI æ™ºèƒ½å®¢æœ | /var/www/fiido-frontend/ | /chat-test/ |
| åå¸­å·¥ä½œå° | /var/www/fiido-workbench/ | /workbench/ |

### 7.3 æœåŠ¡ç®¡ç†

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status fiido-ai-chatbot fiido-agent-workbench

# é‡å¯æœåŠ¡
systemctl restart fiido-ai-chatbot fiido-agent-workbench

# æŸ¥çœ‹æ—¥å¿—
journalctl -u fiido-ai-chatbot -f
journalctl -u fiido-agent-workbench -f

# é‡è½½ nginx
systemctl reload nginx
```

### 7.4 è®¿é—®åœ°å€

| åŠŸèƒ½ | URL |
|------|-----|
| AI å®¢æœå‰ç«¯ | https://ai.fiido.com/chat-test/ |
| åå¸­å·¥ä½œå°å‰ç«¯ | https://ai.fiido.com/workbench/ |
| AI å®¢æœ API | https://ai.fiido.com/api/ |
| åå¸­å·¥ä½œå° API | https://ai.fiido.com/workbench-api/ |
| å¥åº·æ£€æŸ¥ | https://ai.fiido.com/api/health |

---

## å…«ã€æ•°æ®åº“

### 8.1 åŒå†™ç­–ç•¥

```
å†™å…¥: PostgreSQLï¼ˆä¸»å­˜å‚¨ï¼‰ â†’ Redisï¼ˆç¼“å­˜ï¼‰
è¯»å–: PostgreSQL ä¼˜å…ˆ â†’ Redis é™çº§
```

### 8.2 æ•°æ®è¡¨

- tickets, ticket_comments, ticket_attachments, ticket_status_history
- ticket_assignments, agents, audit_logs, session_archives, email_records

---

## ä¹ã€å¿«é€Ÿå¯¼èˆª

### äº§å“æ¨¡å—
- [AI æ™ºèƒ½å®¢æœ](products/ai_chatbot/README.md)
- [åå¸­å·¥ä½œå°](products/agent_workbench/README.md)
- [å®¢æˆ·æ§åˆ¶å°](products/customer_portal/README.md)
- [ç‰©æµé€šçŸ¥](products/notification/README.md)

### æœåŠ¡æ¨¡å—
- [Shopify è®¢å•](services/shopify/README.md)
- [é‚®ä»¶æœåŠ¡](services/email/README.md)
- [Coze AI](services/coze/README.md)
- [å·¥å•æœåŠ¡](services/ticket/README.md)
- [ä¼šè¯æœåŠ¡](services/session/README.md)
- [ç‰©æµè¿½è¸ª](services/tracking/README.md)

### åŸºç¡€è®¾æ–½
- [æ•°æ®åº“](infrastructure/database/README.md)
- [å®‰å…¨è®¤è¯](infrastructure/security/README.md)

---

## åã€ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| æœ€é«˜å¼€å‘è§„èŒƒ | CLAUDE.md | å¿…è¯» |
| äº§å“å±‚è§„èŒƒ | products/README.md | äº§å“å¼€å‘è§„èŒƒ |
| æœåŠ¡å±‚è§„èŒƒ | services/README.md | æœåŠ¡å¼€å‘è§„èŒƒ |
| åŸºç¡€è®¾æ–½è§„èŒƒ | infrastructure/README.md | åŸºç¡€è®¾æ–½è§„èŒƒ |

---

*æ–‡æ¡£ç‰ˆæœ¬ v8.0 - 2025-12-23 (å¾®æœåŠ¡æ¶æ„é‡æ–°éƒ¨ç½²)*
