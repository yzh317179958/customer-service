# 意图识别提示词

分析用户输入，判断意图类型并提取关键实体信息。

## 意图分类

### 1. order_query（订单查询）
**触发条件**：用户提供了订单号，想查询订单状态或物流信息
**关键词**：订单号、查订单、物流、发货、到哪了、tracking、order status
**示例**：
- "帮我查一下订单 UK22080"
- "UK22080 发货了吗"
- "我的订单 #UK22080 物流到哪了"
- "Check order UK22080"

### 2. order_list（订单列表查询）
**触发条件**：用户提供了邮箱地址，但没有订单号，想查询自己的订单
**关键词**：我的订单、订单记录、邮箱、email
**示例**：
- "我的邮箱是 xxx@gmail.com，查一下我的订单"
- "用 xxx@gmail.com 下的单，帮我看看"
- "查询邮箱 xxx@gmail.com 的订单"

### 3. order_guide（订单引导）
**触发条件**：用户想查订单，但没有提供订单号和邮箱
**关键词**：查订单、订单状态、物流查询（但无具体信息）
**示例**：
- "我想查订单"
- "怎么查物流"
- "订单到哪了"（无订单号）

### 4. product_consult（产品咨询）
**触发条件**：用户咨询 Fiido 产品相关问题
**子类型**：
- **product_info**：产品参数、功能、性能
- **product_compare**：产品对比、推荐
- **product_price**：价格、促销、优惠
- **product_purchase**：购买、下单、支付
- **product_aftermarket**：售后、维修、质保、配件
- **product_usage**：使用方法、骑行问题
**示例**：
- "C11 Pro 续航多少公里"
- "通勤用哪款车好"
- "电池坏了怎么办"
- "有什么优惠活动"

### 5. general_chat（闲聊问候）
**触发条件**：用户进行闲聊、问候，或与产品/订单无关的对话
**示例**：
- "你好"
- "谢谢"
- "今天天气怎么样"

## 实体提取规则

### 订单号 (order_number)
- 格式：UK + 数字（如 UK22080）
- 变体：#UK22080、UK-22080、uk22080
- 提取时统一去掉 # 和 - 符号，保留 UK + 数字

### 邮箱 (email)
- 标准邮箱格式：xxx@xxx.com
- 注意识别用户表述中的邮箱

## 输出格式（JSON）

{
  "intent": "order_query|order_list|order_guide|product_consult|general_chat",
  "sub_intent": "product_info|product_compare|product_price|product_purchase|product_aftermarket|product_usage|null",
  "order_number": "提取的订单号或null",
  "email": "提取的邮箱或null",
  "confidence": 0.0-1.0,
  "reason": "判断理由（简短说明）"
}

## 判断优先级

1. **最高优先级**：有订单号 → order_query
2. **次高优先级**：有邮箱且提到订单 → order_list
3. **中优先级**：提到订单但无信息 → order_guide
4. **默认**：产品相关 → product_consult
5. **兜底**：其他 → general_chat

## 特殊情况处理

1. **同时有订单号和邮箱**：优先 order_query（订单号更精确）
2. **历史对话上下文**：结合历史对话判断，如果用户之前提供过订单号/邮箱，当前对话提到"那个订单"应关联之前的信息
3. **模糊表述**：如"帮我查查"需要结合上下文判断是查订单还是查产品信息

## 用户输入

{{user_input}}

## 历史对话（如有）

{{chat_history}}
