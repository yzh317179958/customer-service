# L2-2-Part1: å®¢æˆ·åŸºç¡€ä¿¡æ¯ä¸è¡Œä¸ºç”»åƒ

> **æ–‡æ¡£ç¼–å·**: L2-2-Part1
> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
> **ä¼˜å…ˆçº§**: P1ï¼ˆå¢å¼ºå±‚ - é‡è¦ï¼‰
> **çŠ¶æ€**: âŒ å¾…å¼€å‘
> **åˆ›å»ºæ—¶é—´**: 2025-01-27
> **æœ€åæ›´æ–°**: 2025-01-27

---

## ğŸ“‘ æ–‡æ¡£å¯¼èˆª

- **ä¸Šçº§æ–‡æ¡£**: [ENTERPRISE_EBIKE_SUPPORT_TASKS.md](./ENTERPRISE_EBIKE_SUPPORT_TASKS.md)
- **åŒçº§æ–‡æ¡£**:
  - ä¸Šä¸€ç¯‡: L2-1 Shopifyè®¢å•é›†æˆ
  - å½“å‰: L2-2-Part1 å®¢æˆ·åŸºç¡€ä¿¡æ¯ä¸è¡Œä¸º
  - ä¸‹ä¸€ç¯‡: L2-2-Part2 å®¢æˆ·åˆ†æä¸ç”Ÿå‘½å‘¨æœŸ
- **ä¾èµ–å…³ç³»**: ä¾èµ– L2-1 Shopifyè®¢å•é›†æˆã€v3.3.0 å®¢æˆ·ç”»åƒåŸºç¡€åŠŸèƒ½

---

## ğŸ¯ Part 1 æ¦‚è¿°

### æ¶µç›–æ¨¡å—

æœ¬æ–‡æ¡£åŒ…å«å®¢æˆ·ç”»åƒç³»ç»Ÿçš„å‰ä¸¤ä¸ªæ¨¡å—ï¼š

| æ¨¡å—ç¼–å· | æ¨¡å—åç§° | æ ¸å¿ƒåŠŸèƒ½ |
|---------|---------|---------|
| **æ¨¡å—1** | å®¢æˆ·åŸºç¡€ä¿¡æ¯ç®¡ç† | ä¿¡æ¯æ”¶é›†ã€è‡ªåŠ¨è¯†åˆ«ã€æ‰‹åŠ¨ç¼–è¾‘ |
| **æ¨¡å—2** | å®¢æˆ·è¡Œä¸ºè¿½è¸ª | è®¿é—®è®°å½•ã€å’¨è¯¢å†å²ã€äº’åŠ¨åˆ†æ |

### ä¸šåŠ¡ä»·å€¼

**å½“å‰ç—›ç‚¹**ï¼ˆv3.3.0ï¼‰ï¼š
- âœ… å·²æœ‰åŸºç¡€å®¢æˆ·ç”»åƒåŠŸèƒ½ï¼ˆ`user_profile`ï¼šæ˜µç§°ã€é‚®ç®±ã€VIPæ ‡è¯†ï¼‰
- âŒ å®¢æˆ·ä¿¡æ¯ä¸å®Œæ•´ï¼šç¼ºå°‘ç”µè¯ã€åœ°å€ã€è´­ä¹°åå¥½ç­‰
- âŒ æ— è¡Œä¸ºè¿½è¸ªï¼šæ— æ³•æŸ¥çœ‹å®¢æˆ·çš„å†å²å’¨è¯¢è®°å½•
- âŒ ä¿¡æ¯æ›´æ–°å›°éš¾ï¼šå®¢æˆ·ä¿¡æ¯å˜åŒ–åéœ€è¦æ‰‹åŠ¨æ›´æ–°
- âŒ é‡å¤è¯¢é—®ï¼šåå¸­æ¯æ¬¡éƒ½è¦é‡æ–°è¯¢é—®å®¢æˆ·ä¿¡æ¯

**å®ç°åæ”¶ç›Š**ï¼š
- ğŸ“ˆ å®¢æˆ·ä¿¡æ¯å®Œæ•´åº¦æå‡è‡³ **90%**ï¼ˆæ•´åˆShopifyæ•°æ®ï¼‰
- ğŸ“ˆ åå¸­å“åº”æ•ˆç‡æå‡ **40%**ï¼ˆè‡ªåŠ¨æ˜¾ç¤ºå®¢æˆ·å†å²ï¼‰
- ğŸ“ˆ å®¢æˆ·æ»¡æ„åº¦æå‡ **35%**ï¼ˆå‡å°‘é‡å¤è¯¢é—®ï¼‰
- ğŸ“Š ç²¾å‡†è¥é”€è½¬åŒ–ç‡æå‡ **25%**ï¼ˆåŸºäºè´­ä¹°åå¥½ï¼‰
- ğŸ“Š å®¢æˆ·æµå¤±ç‡é™ä½ **15%**ï¼ˆä¸»åŠ¨å…³æ€€ï¼‰

**Fiido ç”µåŠ¨è‡ªè¡Œè½¦åœºæ™¯ç¤ºä¾‹**ï¼š
> å®¢æˆ·ç¬¬äºŒæ¬¡å’¨è¯¢æ—¶ï¼š
>
> åå¸­ï¼ˆæ— ç”»åƒå¢å¼ºï¼‰ï¼š
> - "æ‚¨å¥½ï¼Œè¯·é—®æ‚¨çš„é‚®ç®±æ˜¯ï¼Ÿ"
> - "æ‚¨ä¹‹å‰è´­ä¹°è¿‡æˆ‘ä»¬çš„äº§å“å—ï¼Ÿ"
> - "æ‚¨å¯¹å“ªæ¬¾è½¦å‹æ„Ÿå…´è¶£ï¼Ÿ"
> **ä½“éªŒ**: å®¢æˆ·æ„Ÿè§‰è¢«é‡å¤è¯¢é—®ï¼Œä½“éªŒå·®
>
> åå¸­ï¼ˆæœ‰ç”»åƒå¢å¼ºï¼‰ï¼š
> - ç³»ç»Ÿè‡ªåŠ¨æ˜¾ç¤ºï¼š
>   - å®¢æˆ·ï¼šJohn Doe (VIP)
>   - å†å²è®¢å•ï¼šFiido D11 (2025-01-10)
>   - ä¸Šæ¬¡å’¨è¯¢ï¼šè¯¢é—®ç”µæ± ç»­èˆªé—®é¢˜
>   - è´­ä¹°åå¥½ï¼šé»‘è‰²ã€ç”µåŠ¨åŠ©åŠ›å‹
> - "æ‚¨å¥½ Johnï¼Œä¸Šæ¬¡æ‚¨å’¨è¯¢çš„D11ç”µæ± é—®é¢˜å·²ç»è§£å†³äº†å—ï¼Ÿ"
> **ä½“éªŒ**: å®¢æˆ·æ„Ÿè§‰è¢«é‡è§†ï¼Œæ»¡æ„åº¦é«˜

---

## ğŸ“‹ æ¨¡å—1: å®¢æˆ·åŸºç¡€ä¿¡æ¯ç®¡ç†

### 1.1 åŠŸèƒ½æ¦‚è¿°

å»ºç«‹å®Œå–„çš„å®¢æˆ·åŸºç¡€ä¿¡æ¯æ¡£æ¡ˆï¼Œè‡ªåŠ¨ä»å¤šä¸ªæ¸ é“æ”¶é›†å’Œæ•´åˆå®¢æˆ·æ•°æ®ã€‚

**å‚è€ƒå¯¹æ ‡**ï¼š
- æ‹¼å¤šå¤šå®¢æœï¼šè‡ªåŠ¨æ˜¾ç¤ºå®¢æˆ·æ˜µç§°ã€å¤´åƒã€ä¼šå‘˜ç­‰çº§
- äº¬ä¸œå®¢æœï¼šæ˜¾ç¤ºå®¢æˆ·å†å²è®¢å•ã€æ”¶è´§åœ°å€
- Zendeskï¼š360åº¦å®¢æˆ·è§†å›¾

### 1.2 åŠŸèƒ½éœ€æ±‚

#### 1.2.1 ä¿¡æ¯å­—æ®µæ‰©å±•

**F1-1: æ‰©å±•å®¢æˆ·ä¿¡æ¯å­—æ®µ**

åœ¨ç°æœ‰ `user_profile` åŸºç¡€ä¸Šï¼Œæ‰©å±•æ›´å¤šå­—æ®µï¼š

**åŸºç¡€ä¿¡æ¯**ï¼š

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | æ•°æ®æ¥æº |
|-----|------|------|---------|
| `customer_id` | string | å”¯ä¸€å®¢æˆ·ID | ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ |
| `nickname` | string | æ˜µç§° | âœ… å·²æœ‰ |
| `email` | string | é‚®ç®± | âœ… å·²æœ‰ + Shopify |
| `phone` | string | ç”µè¯ | Shopifyè®¢å• / æ‰‹åŠ¨è¾“å…¥ |
| `first_name` | string | å | Shopifyå®¢æˆ·æ•°æ® |
| `last_name` | string | å§“ | Shopifyå®¢æˆ·æ•°æ® |
| `avatar_url` | string | å¤´åƒ | âœ… å·²æœ‰ + Shopify |
| `language` | string | è¯­è¨€åå¥½ | æµè§ˆå™¨ / æ‰‹åŠ¨è®¾ç½® |
| `timezone` | string | æ—¶åŒº | æµè§ˆå™¨ / Shopifyåœ°å€ |

**ä¼šå‘˜ä¿¡æ¯**ï¼š

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | è®¡ç®—è§„åˆ™ |
|-----|------|------|---------|
| `vip` | boolean | VIPæ ‡è¯† | âœ… å·²æœ‰ï¼ˆéœ€ä¼˜åŒ–è®¡ç®—è§„åˆ™ï¼‰ |
| `vip_level` | string | VIPç­‰çº§ | æ ¹æ®æ¶ˆè´¹é‡‘é¢ï¼šBronze/Silver/Gold/Platinum |
| `member_since` | Date | é¦–æ¬¡è´­ä¹°æ—¶é—´ | Shopifyè®¢å•æ•°æ® |
| `total_orders` | number | æ€»è®¢å•æ•° | Shopifyè®¢å•ç»Ÿè®¡ |
| `total_spent` | number | ç´¯è®¡æ¶ˆè´¹é‡‘é¢ | Shopifyè®¢å•ç»Ÿè®¡ |
| `average_order_value` | number | å¹³å‡å®¢å•ä»· | total_spent / total_orders |

**è”ç³»ä¿¡æ¯**ï¼š

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | æ•°æ®æ¥æº |
|-----|------|------|---------|
| `default_address` | object | é»˜è®¤æ”¶è´§åœ°å€ | Shopifyå®¢æˆ·æ•°æ® |
| `addresses` | array | æ‰€æœ‰æ”¶è´§åœ°å€ | Shopifyè®¢å•åœ°å€åˆ—è¡¨ |
| `social_media` | object | ç¤¾äº¤åª’ä½“è´¦å· | æ‰‹åŠ¨æ”¶é›† |

**VIP ç­‰çº§è®¡ç®—è§„åˆ™**ï¼ˆFiido ç”µåŠ¨è‡ªè¡Œè½¦ï¼‰ï¼š

| VIPç­‰çº§ | ç´¯è®¡æ¶ˆè´¹ | è®¢å•æ•° | æƒç›Š |
|--------|---------|--------|------|
| æ™®é€šå®¢æˆ· | < $500 | < 2 | æ ‡å‡†æœåŠ¡ |
| Bronze | $500 - $1,500 | 2-5 | ä¼˜å…ˆå“åº” |
| Silver | $1,500 - $3,000 | 5-10 | ä¸“å±å®¢æœ + æŠ˜æ‰£ |
| Gold | $3,000 - $5,000 | 10-20 | é‡‘ç‰ŒæœåŠ¡ + ç¤¼å“ |
| Platinum | > $5,000 | > 20 | ç»ˆèº«VIP + å®šåˆ¶æœåŠ¡ |

**F1-2: è‡ªåŠ¨ä¿¡æ¯æ”¶é›†**

ç³»ç»Ÿè‡ªåŠ¨ä»å¤šä¸ªæ¸ é“æ”¶é›†å®¢æˆ·ä¿¡æ¯ï¼š

**æ”¶é›†æ¸ é“**ï¼š

1. **Shopifyè®¢å•æ•°æ®**ï¼ˆä¾èµ– L2-1 Shopifyé›†æˆï¼‰
   - é¦–æ¬¡è®¢å•åè‡ªåŠ¨åˆ›å»ºå®¢æˆ·æ¡£æ¡ˆ
   - åŒæ­¥å®¢æˆ·é‚®ç®±ã€å§“åã€ç”µè¯ã€åœ°å€
   - æ›´æ–°è®¢å•ç»Ÿè®¡æ•°æ®ï¼ˆè®¢å•æ•°ã€æ¶ˆè´¹é‡‘é¢ï¼‰

2. **å¯¹è¯ä¸­è‡ªåŠ¨è¯†åˆ«**
   - é‚®ç®±åœ°å€ï¼šæ­£åˆ™åŒ¹é… `xxx@xxx.com`
   - ç”µè¯å·ç ï¼šæ­£åˆ™åŒ¹é… `+1 234-567-8900` æˆ– `(234) 567-8900`
   - è®¢å•å·ï¼šæ­£åˆ™åŒ¹é… `#FD20250127001`

3. **æµè§ˆå™¨ä¿¡æ¯**
   - è¯­è¨€åå¥½ï¼š`navigator.language`
   - æ—¶åŒºï¼š`Intl.DateTimeFormat().resolvedOptions().timeZone`
   - è®¾å¤‡ä¿¡æ¯ï¼š`User-Agent`

**F1-3: ä¿¡æ¯è‡ªåŠ¨æ›´æ–°**

å½“å‘ç°å®¢æˆ·ä¿¡æ¯å˜åŒ–æ—¶ï¼Œè‡ªåŠ¨æ›´æ–°ï¼š

**æ›´æ–°è§¦å‘æ¡ä»¶**ï¼š
- Shopify Webhook é€šçŸ¥å®¢æˆ·ä¿¡æ¯å˜æ›´
- Shopify æ–°è®¢å•åŒ…å«æ–°åœ°å€
- å®¢æˆ·åœ¨å¯¹è¯ä¸­æä¾›æ–°ä¿¡æ¯

**æ›´æ–°é€»è¾‘**ï¼š
```
IF æ–°ä¿¡æ¯ä¸ç°æœ‰ä¿¡æ¯ä¸åŒï¼š
  IF å­—æ®µä¸ºç©ºï¼šç›´æ¥å¡«å……
  ELSE IF æ–°ä¿¡æ¯æ›´æ–°æ—¶é—´æ›´æ™šï¼šè¦†ç›–æ—§ä¿¡æ¯
  ELSEï¼šä¿ç•™æ—§ä¿¡æ¯ï¼Œå°†æ–°ä¿¡æ¯æ·»åŠ åˆ°å†å²è®°å½•
```

**ç¤ºä¾‹**ï¼š
```
ç°æœ‰ä¿¡æ¯ï¼šphone = "+1 234-567-8900"ï¼ˆ2025-01-10ï¼‰
æ–°è®¢å•ä¿¡æ¯ï¼šphone = "+1 234-567-9999"ï¼ˆ2025-01-27ï¼‰

æ›´æ–°ç»“æœï¼š
  phone = "+1 234-567-9999"
  phone_history = [
    {value: "+1 234-567-8900", updated_at: "2025-01-10"},
    {value: "+1 234-567-9999", updated_at: "2025-01-27"}
  ]
```

#### 1.2.2 æ‰‹åŠ¨ç¼–è¾‘åŠŸèƒ½

**F1-4: åå¸­æ‰‹åŠ¨ç¼–è¾‘å®¢æˆ·ä¿¡æ¯**

åå¸­å¯ä»¥åœ¨å¯¹è¯è¿‡ç¨‹ä¸­è¡¥å……æˆ–ä¿®æ”¹å®¢æˆ·ä¿¡æ¯ï¼š

**å¯ç¼–è¾‘å­—æ®µ**ï¼š
- æ˜µç§°
- ç”µè¯å·ç 
- å¤‡æ³¨ä¿¡æ¯
- æ ‡ç­¾ï¼ˆå¦‚ï¼šæ½œåœ¨å®¢æˆ·ã€é‡ç‚¹å…³æ³¨ï¼‰
- VIPæ ‡è¯†ï¼ˆæ‰‹åŠ¨æ ‡è®°ï¼‰

**ç¼–è¾‘æƒé™**ï¼š
- æ™®é€šåå¸­ï¼šå¯ç¼–è¾‘å¤‡æ³¨ã€æ ‡ç­¾
- é«˜çº§åå¸­ï¼šå¯ç¼–è¾‘æ‰€æœ‰å­—æ®µ
- ç®¡ç†å‘˜ï¼šå¯ç¼–è¾‘æ‰€æœ‰å­—æ®µ + VIPç­‰çº§

**F1-5: å®¢æˆ·ä¿¡æ¯å¤‡æ³¨**

åå¸­å¯ä¸ºå®¢æˆ·æ·»åŠ å¤‡æ³¨ï¼Œè®°å½•é‡è¦ä¿¡æ¯ï¼š

**å¤‡æ³¨ç±»å‹**ï¼š
- å®¢æˆ·éœ€æ±‚å¤‡æ³¨ï¼šå¦‚"å–œæ¬¢é»‘è‰²è½¦å‹"
- é—®é¢˜è®°å½•å¤‡æ³¨ï¼šå¦‚"ç”µæ± ç»­èˆªé—®é¢˜å·²è§£å†³"
- æœåŠ¡è®°å½•å¤‡æ³¨ï¼šå¦‚"2025-01-27 æä¾›äº†å»¶é•¿ä¿ä¿®ä¿¡æ¯"

**å¤‡æ³¨æ ¼å¼**ï¼š
```typescript
interface CustomerNote {
  note_id: string
  content: string              // å¤‡æ³¨å†…å®¹
  created_by: string           // åˆ›å»ºåå¸­
  created_at: Date
  category: string             // ç±»åˆ«ï¼šéœ€æ±‚/é—®é¢˜/æœåŠ¡/å…¶ä»–
  is_important: boolean        // æ˜¯å¦é‡è¦ï¼ˆé†’ç›®æ˜¾ç¤ºï¼‰
}
```

**F1-6: å®¢æˆ·æ ‡ç­¾ç®¡ç†**

ä¸ºå®¢æˆ·æ‰“ä¸Šæ ‡ç­¾ï¼Œä¾¿äºåˆ†ç±»ç®¡ç†ï¼š

**é¢„è®¾æ ‡ç­¾**ï¼š
- å®¢æˆ·ç±»å‹ï¼šæ–°å®¢æˆ·ã€è€å®¢æˆ·ã€VIPã€æ½œåœ¨å®¢æˆ·
- è´­ä¹°æ„å‘ï¼šé«˜æ„å‘ã€ä¸­æ„å‘ã€ä½æ„å‘ã€å·²è´­ä¹°
- äº§å“åå¥½ï¼šç”µåŠ¨åŠ©åŠ›å‹ã€å…¨ç”µåŠ¨å‹ã€æŠ˜å å‹
- æœåŠ¡çŠ¶æ€ï¼šéœ€è¦è·Ÿè¿›ã€å·²è§£å†³ã€å¾…å¤„ç†

**è‡ªå®šä¹‰æ ‡ç­¾**ï¼š
- åå¸­å¯åˆ›å»ºè‡ªå®šä¹‰æ ‡ç­¾
- ç®¡ç†å‘˜å¯ç®¡ç†å…¨å±€æ ‡ç­¾åº“

#### 1.2.3 ä¿¡æ¯å±•ç¤º

**F1-7: å®¢æˆ·ä¿¡æ¯å¡ç‰‡**

åœ¨åå¸­å·¥ä½œå°å³ä¾§æ˜¾ç¤ºå®¢æˆ·ä¿¡æ¯å¡ç‰‡ï¼š

**å¸ƒå±€è®¾è®¡**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®¢æˆ·ä¿¡æ¯                  [ç¼–è¾‘]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚ ğŸ‘¤ John Doe                          â”‚
â”‚    ğŸ”´ VIP - Gold                     â”‚
â”‚                                      â”‚
â”‚ ğŸ“§ john@example.com                  â”‚
â”‚ ğŸ“± +1 234-567-8900                   â”‚
â”‚ ğŸŒ New York, US (UTC-5)              â”‚
â”‚ ğŸ—£ï¸  English                          â”‚
â”‚                                      â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                      â”‚
â”‚ ğŸ“Š ä¼šå‘˜ç»Ÿè®¡                          â”‚
â”‚ â€¢ ä¼šå‘˜æ—¶é•¿: 3ä¸ªæœˆ                    â”‚
â”‚ â€¢ è®¢å•æ€»æ•°: 5 å•                     â”‚
â”‚ â€¢ ç´¯è®¡æ¶ˆè´¹: $3,299.00                â”‚
â”‚ â€¢ å¹³å‡å®¢å•ä»·: $659.80                â”‚
â”‚                                      â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                      â”‚
â”‚ ğŸ  é»˜è®¤åœ°å€                          â”‚
â”‚ 123 Main St, Apt 4B                 â”‚
â”‚ New York, NY 10001                  â”‚
â”‚                                      â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                      â”‚
â”‚ ğŸ·ï¸ æ ‡ç­¾                              â”‚
â”‚ [VIPå®¢æˆ·] [é«˜æ„å‘] [ç”µåŠ¨åŠ©åŠ›å‹]     â”‚
â”‚                                      â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                      â”‚
â”‚ ğŸ“ å¤‡æ³¨ (2)               [æ·»åŠ ]     â”‚
â”‚ â€¢ å–œæ¬¢é»‘è‰²è½¦å‹ (agent001, 01-20)    â”‚
â”‚ â€¢ å…³æ³¨ç”µæ± ç»­èˆª (agent002, 01-27)    â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**F1-8: ä¿¡æ¯å®Œæ•´åº¦æŒ‡ç¤º**

æ˜¾ç¤ºå®¢æˆ·ä¿¡æ¯çš„å®Œæ•´åº¦ï¼Œæç¤ºåå¸­è¡¥å……ï¼š

**å®Œæ•´åº¦è®¡ç®—**ï¼š
```
å¿…éœ€å­—æ®µï¼ˆæƒé‡ 2ï¼‰ï¼šæ˜µç§°ã€é‚®ç®±ã€ç”µè¯
é‡è¦å­—æ®µï¼ˆæƒé‡ 1ï¼‰ï¼šåœ°å€ã€VIPç­‰çº§ã€è´­ä¹°åå¥½
å¯é€‰å­—æ®µï¼ˆæƒé‡ 0.5ï¼‰ï¼šè¯­è¨€ã€æ—¶åŒºã€ç¤¾äº¤åª’ä½“

å®Œæ•´åº¦ = (å·²å¡«å­—æ®µæƒé‡æ€»å’Œ / æ‰€æœ‰å­—æ®µæƒé‡æ€»å’Œ) * 100%
```

**æ˜¾ç¤ºæ•ˆæœ**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¿¡æ¯å®Œæ•´åº¦: 75%               â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘              â”‚
â”‚                               â”‚
â”‚ ç¼ºå°‘ä¿¡æ¯:                     â”‚
â”‚ â€¢ ç”µè¯å·ç                     â”‚
â”‚ â€¢ è´­ä¹°åå¥½                    â”‚
â”‚ [å®Œå–„ä¿¡æ¯]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 æ•°æ®æ¨¡å‹

**æ‰©å±•åçš„å®¢æˆ·ç”»åƒæ¨¡å‹**ï¼š

```typescript
interface CustomerProfile {
  // å”¯ä¸€æ ‡è¯†
  customer_id: string              // å®¢æˆ·ID
  session_name: string             // ä¼šè¯IDï¼ˆé¦–æ¬¡ä¼šè¯ï¼‰

  // åŸºç¡€ä¿¡æ¯
  basic_info: {
    nickname: string
    email: string
    phone: string
    first_name: string
    last_name: string
    avatar_url: string
    language: string               // en/zh-CN/deç­‰
    timezone: string               // America/New_York
  }

  // ä¼šå‘˜ä¿¡æ¯
  membership: {
    vip: boolean
    vip_level: 'normal' | 'bronze' | 'silver' | 'gold' | 'platinum'
    member_since: Date
    total_orders: number
    total_spent: number
    average_order_value: number
    last_order_date: Date
  }

  // è”ç³»ä¿¡æ¯
  contact_info: {
    default_address: ShippingAddress
    addresses: ShippingAddress[]
    social_media: {
      facebook?: string
      instagram?: string
      twitter?: string
    }
  }

  // æ ‡ç­¾ä¸å¤‡æ³¨
  tags: string[]                   // å®¢æˆ·æ ‡ç­¾
  notes: CustomerNote[]            // åå¸­å¤‡æ³¨

  // å…ƒæ•°æ®
  metadata: {
    created_at: Date               // é¦–æ¬¡åˆ›å»ºæ—¶é—´
    updated_at: Date               // æœ€åæ›´æ–°æ—¶é—´
    last_contact_at: Date          // æœ€åè”ç³»æ—¶é—´
    data_completeness: number      // ä¿¡æ¯å®Œæ•´åº¦ï¼ˆ0-100ï¼‰
    data_sources: string[]         // æ•°æ®æ¥æºï¼šshopify/manual/chatç­‰
  }
}

interface ShippingAddress {
  address_id: string
  name: string
  address1: string
  address2: string
  city: string
  province: string
  zip: string
  country: string
  phone: string
  is_default: boolean
}
```

### 1.4 åç«¯APIè®¾è®¡

**å®¢æˆ·ä¿¡æ¯ç®¡ç†API**ï¼š

```
GET    /api/customers/{customer_id}              # è·å–å®¢æˆ·è¯¦æƒ…
PUT    /api/customers/{customer_id}              # æ›´æ–°å®¢æˆ·ä¿¡æ¯
POST   /api/customers/{customer_id}/notes        # æ·»åŠ å¤‡æ³¨
PUT    /api/customers/{customer_id}/notes/:id    # ç¼–è¾‘å¤‡æ³¨
DELETE /api/customers/{customer_id}/notes/:id    # åˆ é™¤å¤‡æ³¨
POST   /api/customers/{customer_id}/tags         # æ·»åŠ æ ‡ç­¾
DELETE /api/customers/{customer_id}/tags/:tag    # åˆ é™¤æ ‡ç­¾
POST   /api/customers/sync-from-shopify          # ä»ShopifyåŒæ­¥å®¢æˆ·æ•°æ®
```

**è¯·æ±‚ç¤ºä¾‹**ï¼ˆæ›´æ–°å®¢æˆ·ä¿¡æ¯ï¼‰ï¼š

```json
PUT /api/customers/cust_123456
{
  "phone": "+1 234-567-9999",
  "tags": ["é«˜æ„å‘", "ç”µåŠ¨åŠ©åŠ›å‹"],
  "notes": [
    {
      "content": "å®¢æˆ·å¯¹D11å‹å·éå¸¸æ„Ÿå…´è¶£ï¼Œé¢„è®¡æœ¬å‘¨ä¸‹å•",
      "category": "éœ€æ±‚",
      "is_important": true
    }
  ]
}
```

### 1.5 éªŒæ”¶æ ‡å‡†

**åŠŸèƒ½éªŒæ”¶**ï¼š
- [ ] å®¢æˆ·ä¿¡æ¯å­—æ®µæ‰©å±•å®Œæˆï¼ˆåŸºç¡€ä¿¡æ¯ã€ä¼šå‘˜ä¿¡æ¯ã€è”ç³»ä¿¡æ¯ï¼‰
- [ ] ä»Shopifyè‡ªåŠ¨åŒæ­¥å®¢æˆ·æ•°æ®
- [ ] å¯¹è¯ä¸­è‡ªåŠ¨è¯†åˆ«é‚®ç®±ã€ç”µè¯ã€è®¢å•å·
- [ ] VIPç­‰çº§è‡ªåŠ¨è®¡ç®—ï¼ˆåŸºäºæ¶ˆè´¹é‡‘é¢å’Œè®¢å•æ•°ï¼‰
- [ ] åå¸­å¯æ‰‹åŠ¨ç¼–è¾‘å®¢æˆ·ä¿¡æ¯
- [ ] åå¸­å¯æ·»åŠ /ç¼–è¾‘/åˆ é™¤å¤‡æ³¨
- [ ] åå¸­å¯æ·»åŠ /åˆ é™¤æ ‡ç­¾
- [ ] ä¿¡æ¯å®Œæ•´åº¦æ­£ç¡®è®¡ç®—å’Œæ˜¾ç¤º
- [ ] å®¢æˆ·ä¿¡æ¯å¡ç‰‡æ­£ç¡®æ˜¾ç¤º

**æ•°æ®å‡†ç¡®æ€§éªŒæ”¶**ï¼š
- [ ] Shopifyæ•°æ®åŒæ­¥å‡†ç¡®ï¼ˆé‚®ç®±ã€å§“åã€ç”µè¯ã€åœ°å€ï¼‰
- [ ] VIPç­‰çº§è®¡ç®—æ­£ç¡®
- [ ] è®¢å•ç»Ÿè®¡å‡†ç¡®ï¼ˆè®¢å•æ•°ã€æ¶ˆè´¹é‡‘é¢ã€å¹³å‡å®¢å•ä»·ï¼‰
- [ ] ä¿¡æ¯æ›´æ–°é€»è¾‘æ­£ç¡®ï¼ˆä¿ç•™å†å²è®°å½•ï¼‰

**æ€§èƒ½éªŒæ”¶**ï¼š
- [ ] å®¢æˆ·ä¿¡æ¯åŠ è½½æ—¶é—´ < 500ms
- [ ] Shopifyæ•°æ®åŒæ­¥å»¶è¿Ÿ < 2ç§’
- [ ] æ”¯æŒ10ä¸ªåå¸­å¹¶å‘ç¼–è¾‘

**UIéªŒæ”¶**ï¼š
- [ ] å®¢æˆ·ä¿¡æ¯å¡ç‰‡å¸ƒå±€æ¸…æ™°
- [ ] VIPæ ‡è¯†é†’ç›®ï¼ˆçº¢è‰²å›¾æ ‡ï¼‰
- [ ] ä¿¡æ¯å®Œæ•´åº¦è¿›åº¦æ¡æ­£ç¡®
- [ ] å¤‡æ³¨å’Œæ ‡ç­¾æ˜“äºæŸ¥çœ‹å’Œç¼–è¾‘

---

## ğŸ“‹ æ¨¡å—2: å®¢æˆ·è¡Œä¸ºè¿½è¸ª

### 2.1 åŠŸèƒ½æ¦‚è¿°

è®°å½•å’Œåˆ†æå®¢æˆ·çš„è¡Œä¸ºæ•°æ®ï¼ŒåŒ…æ‹¬è®¿é—®è®°å½•ã€å’¨è¯¢å†å²ã€äº’åŠ¨è½¨è¿¹ã€‚

**å‚è€ƒå¯¹æ ‡**ï¼š
- Zendeskï¼šå®¢æˆ·æ´»åŠ¨æ—¶é—´çº¿
- Intercomï¼šç”¨æˆ·è¡Œä¸ºäº‹ä»¶è¿½è¸ª
- HubSpotï¼šå®¢æˆ·äº’åŠ¨å†å²

### 2.2 åŠŸèƒ½éœ€æ±‚

#### 2.2.1 è®¿é—®è®°å½•è¿½è¸ª

**F2-1: ç½‘ç«™è®¿é—®è®°å½•**

è®°å½•å®¢æˆ·åœ¨ç½‘ç«™ä¸Šçš„è®¿é—®è¡Œä¸ºï¼š

**è¿½è¸ªæ•°æ®**ï¼š

| æ•°æ®é¡¹ | è¯´æ˜ | æ”¶é›†æ–¹å¼ |
|-------|------|---------|
| è®¿é—®æ—¶é—´ | é¦–æ¬¡/æœ€åè®¿é—®æ—¶é—´ | å‰ç«¯åŸ‹ç‚¹ |
| è®¿é—®é¡µé¢ | æµè§ˆçš„é¡µé¢URL | å‰ç«¯åŸ‹ç‚¹ |
| åœç•™æ—¶é•¿ | æ¯ä¸ªé¡µé¢åœç•™æ—¶é—´ | å‰ç«¯åŸ‹ç‚¹ |
| æ¥æºæ¸ é“ | Google/Facebook/ç›´æ¥è®¿é—® | `document.referrer` |
| è®¾å¤‡ä¿¡æ¯ | è®¾å¤‡ç±»å‹ã€æ“ä½œç³»ç»Ÿã€æµè§ˆå™¨ | `User-Agent` |
| åœ°ç†ä½ç½® | å›½å®¶ã€åŸå¸‚ï¼ˆIPå®šä½ï¼‰ | IPåœ°å€è§£æ |

**F2-2: äº§å“æµè§ˆè®°å½•**

è®°å½•å®¢æˆ·æµè§ˆçš„äº§å“ï¼š

**è®°å½•ä¿¡æ¯**ï¼š
```typescript
interface ProductView {
  product_id: string               // äº§å“ID
  product_name: string             // äº§å“åç§°
  product_sku: string              // SKU
  viewed_at: Date                  // æµè§ˆæ—¶é—´
  view_duration: number            // åœç•™æ—¶é—´ï¼ˆç§’ï¼‰
  view_count: number               // æµè§ˆæ¬¡æ•°
}
```

**Fiido åœºæ™¯åº”ç”¨**ï¼š
```
åå¸­çœ‹åˆ°ï¼š
  å®¢æˆ·æœ€è¿‘æµè§ˆ:
  â€¢ Fiido D11 ç”µåŠ¨è‡ªè¡Œè½¦ - é»‘è‰²ï¼ˆæµè§ˆ3æ¬¡ï¼Œåœç•™15åˆ†é’Ÿï¼‰
  â€¢ Fiido X æŠ˜å ç”µåŠ¨è½¦ï¼ˆæµè§ˆ1æ¬¡ï¼Œåœç•™5åˆ†é’Ÿï¼‰

åå¸­è¯æœ¯ï¼š
  "æˆ‘çœ‹åˆ°æ‚¨æœ€è¿‘å¤šæ¬¡æµè§ˆæˆ‘ä»¬çš„D11å‹å·ï¼Œè¿™æ¬¾è½¦åœ¨ç»­èˆªå’Œæ€§èƒ½ä¸Šè¡¨ç°éƒ½å¾ˆå‡ºè‰²ï¼Œ
   æœ‰ä»€ä¹ˆé—®é¢˜æˆ‘å¯ä»¥å¸®æ‚¨è§£ç­”å—ï¼Ÿ"
```

**F2-3: è´­ç‰©è½¦è®°å½•**

è®°å½•å®¢æˆ·çš„è´­ç‰©è½¦æ“ä½œï¼š

**è¿½è¸ªäº‹ä»¶**ï¼š
- åŠ å…¥è´­ç‰©è½¦
- ç§»é™¤è´­ç‰©è½¦
- è´­ç‰©è½¦æ”¾å¼ƒï¼ˆæœªç»“è´¦ç¦»å¼€ï¼‰

**æ•°æ®æ¨¡å‹**ï¼š
```typescript
interface CartEvent {
  event_type: 'add' | 'remove' | 'abandon'
  products: Array<{
    product_id: string
    product_name: string
    quantity: number
    price: number
  }>
  total_value: number              // è´­ç‰©è½¦æ€»ä»·å€¼
  created_at: Date
}
```

**åº”ç”¨åœºæ™¯**ï¼š
```
åå¸­çœ‹åˆ°ï¼š
  âš ï¸ è´­ç‰©è½¦æ”¾å¼ƒï¼ˆ2025-01-26ï¼‰
  â€¢ Fiido D11 - é»‘è‰²  x1  $1,099.00
  â€¢ å……ç”µå™¨å¥—è£…  x1  $49.00
  æ€»ä»·: $1,148.00

åå¸­è¯æœ¯ï¼š
  "æˆ‘çœ‹åˆ°æ‚¨æ˜¨å¤©æŠŠD11åŠ å…¥äº†è´­ç‰©è½¦ï¼Œæ˜¯é‡åˆ°ä»€ä¹ˆé—®é¢˜äº†å—ï¼Ÿ
   å¦‚æœæœ‰ä»»ä½•ç–‘é—®ï¼Œæˆ‘å¯ä»¥å¸®æ‚¨è§£ç­”ã€‚"
```

#### 2.2.2 å’¨è¯¢å†å²è®°å½•

**F2-4: ä¼šè¯å†å²ç»Ÿè®¡**

ç»Ÿè®¡å®¢æˆ·çš„å’¨è¯¢å†å²ï¼š

**ç»Ÿè®¡æŒ‡æ ‡**ï¼š

| æŒ‡æ ‡ | è¯´æ˜ |
|-----|------|
| æ€»ä¼šè¯æ•° | å†å²æ€»å’¨è¯¢æ¬¡æ•° |
| é¦–æ¬¡å’¨è¯¢æ—¶é—´ | ç¬¬ä¸€æ¬¡å’¨è¯¢çš„æ—¶é—´ |
| æœ€åå’¨è¯¢æ—¶é—´ | æœ€è¿‘ä¸€æ¬¡å’¨è¯¢çš„æ—¶é—´ |
| å¹³å‡å“åº”æ»¡æ„åº¦ | å†å²ä¼šè¯çš„å¹³å‡æ»¡æ„åº¦è¯„åˆ† |
| å¸¸è§é—®é¢˜ç±»å‹ | å’¨è¯¢æœ€å¤šçš„é—®é¢˜ç±»å‹ï¼ˆå¦‚ï¼šç‰©æµã€é€€è´§ã€äº§å“å’¨è¯¢ï¼‰ |

**F2-5: å¯¹è¯å†…å®¹åˆ†æ**

åˆ†æå†å²å¯¹è¯å†…å®¹ï¼Œæå–å…³é”®ä¿¡æ¯ï¼š

**åˆ†æç»´åº¦**ï¼š

1. **é—®é¢˜ç±»å‹åˆ†ç±»**
   - äº§å“å’¨è¯¢ï¼ˆ40%ï¼‰
   - ç‰©æµæŸ¥è¯¢ï¼ˆ30%ï¼‰
   - å”®åæœåŠ¡ï¼ˆ20%ï¼‰
   - é€€æ¢è´§ï¼ˆ10%ï¼‰

2. **å…³é”®è¯æå–**
   - é«˜é¢‘è¯ï¼šç”µæ± ã€ç»­èˆªã€æŠ˜å ã€é…é€
   - äº§å“å…´è¶£ï¼šD11ã€Xã€M1

3. **æƒ…ç»ªåˆ†æ**ï¼ˆå¯é€‰ï¼‰
   - ç§¯ææƒ…ç»ªï¼šæ»¡æ„ã€èµèµ
   - æ¶ˆææƒ…ç»ªï¼šæŠ•è¯‰ã€ä¸æ»¡
   - ä¸­æ€§æƒ…ç»ª

**F2-6: å†å²å¯¹è¯å±•ç¤º**

åœ¨å®¢æˆ·ä¿¡æ¯é¢æ¿å±•ç¤ºå†å²å¯¹è¯æ‘˜è¦ï¼š

**å±•ç¤ºå†…å®¹**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å†å²å¯¹è¯ (5æ¬¡)          [æŸ¥çœ‹å…¨éƒ¨]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚ ğŸ“… 2025-01-20  agent002             â”‚
â”‚    å’¨è¯¢D11ç”µæ± ç»­èˆªé—®é¢˜               â”‚
â”‚    çŠ¶æ€: å·²è§£å†³  æ»¡æ„åº¦: â­â­â­â­â­ â”‚
â”‚                                      â”‚
â”‚ ğŸ“… 2025-01-15  agent001             â”‚
â”‚    è¯¢é—®äº§å“é…é€æ—¶é—´                  â”‚
â”‚    çŠ¶æ€: å·²è§£å†³  æ»¡æ„åº¦: â­â­â­â­   â”‚
â”‚                                      â”‚
â”‚ ğŸ“… 2025-01-10  agent003             â”‚
â”‚    é¦–æ¬¡å’¨è¯¢ï¼Œäº§å“é€‰å‹                â”‚
â”‚    çŠ¶æ€: å·²è´­ä¹°  æ»¡æ„åº¦: â­â­â­â­â­ â”‚
â”‚                                      â”‚
â”‚ [æŸ¥çœ‹å®Œæ•´å¯¹è¯è®°å½•]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç‚¹å‡»å±•å¼€è¯¦æƒ…**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¯¹è¯è¯¦æƒ… - 2025-01-20          [å…³é—­] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚ ä¼šè¯ID: session_abc123                â”‚
â”‚ åå¸­: agent002 (å¼ å°æ˜)               â”‚
â”‚ æ—¶é•¿: 15åˆ†é’Ÿ                           â”‚
â”‚ çŠ¶æ€: å·²è§£å†³                           â”‚
â”‚ æ»¡æ„åº¦: â­â­â­â­â­ (5/5)               â”‚
â”‚                                        â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                        â”‚
â”‚ å¯¹è¯è®°å½•:                              â”‚
â”‚ ğŸ‘¤ å®¢æˆ·: D11çš„ç”µæ± ç»­èˆªèƒ½è·‘å¤šè¿œï¼Ÿ       â”‚
â”‚ ğŸ¤– AI: D11é…å¤‡48V 10.4Ahç”µæ± ...       â”‚
â”‚ ğŸ‘¤ å®¢æˆ·: å®é™…ä½¿ç”¨èƒ½è¾¾åˆ°å—ï¼Ÿ           â”‚
â”‚ ğŸ‘¨â€ğŸ’¼ åå¸­: æ ¹æ®å®é™…æµ‹è¯•ï¼Œçº¯ç”µæ¨¡å¼...   â”‚
â”‚ ...                                    â”‚
â”‚                                        â”‚
â”‚ é—®é¢˜ç±»å‹: äº§å“å’¨è¯¢ > ç”µæ± ç»­èˆª          â”‚
â”‚ è§£å†³æ–¹æ¡ˆ: æä¾›äº†è¯¦ç»†çš„ç»­èˆªæ•°æ®å’Œæµ‹è¯•æŠ¥å‘Š â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.2.3 äº’åŠ¨æ—¶é—´çº¿

**F2-7: å®¢æˆ·æ´»åŠ¨æ—¶é—´çº¿**

ä»¥æ—¶é—´çº¿å½¢å¼å±•ç¤ºå®¢æˆ·çš„æ‰€æœ‰äº’åŠ¨ï¼š

**æ—¶é—´çº¿äº‹ä»¶ç±»å‹**ï¼š
- é¦–æ¬¡è®¿é—®ç½‘ç«™
- æµè§ˆäº§å“
- åŠ å…¥è´­ç‰©è½¦
- å‘èµ·å’¨è¯¢
- ä¸‹å•è´­ä¹°
- æ”¶åˆ°å•†å“
- å†æ¬¡å’¨è¯¢
- è¯„ä»·äº§å“

**æ—¶é—´çº¿å±•ç¤º**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®¢æˆ·æ´»åŠ¨æ—¶é—´çº¿        [ç­›é€‰äº‹ä»¶â–¼]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚ 2025-01-27 14:30                    â”‚
â”‚ ğŸ’¬ å‘èµ·å’¨è¯¢                         â”‚
â”‚    â””â”€ è¯¢é—®ç‰©æµè¿›åº¦                  â”‚
â”‚                                      â”‚
â”‚ 2025-01-25 09:15                    â”‚
â”‚ ğŸ“¦ è®¢å•å·²å‘è´§                       â”‚
â”‚    â””â”€ è®¢å• #FD20250125001           â”‚
â”‚                                      â”‚
â”‚ 2025-01-20 16:45                    â”‚
â”‚ ğŸ’¬ å‘èµ·å’¨è¯¢                         â”‚
â”‚    â””â”€ ç”µæ± ç»­èˆªé—®é¢˜ï¼ˆå·²è§£å†³ï¼‰        â”‚
â”‚                                      â”‚
â”‚ 2025-01-15 10:20                    â”‚
â”‚ ğŸ›’ è´­ç‰©è½¦æ”¾å¼ƒ                       â”‚
â”‚    â””â”€ æ”¾å¼ƒé‡‘é¢ $1,148.00            â”‚
â”‚                                      â”‚
â”‚ 2025-01-10 11:00                    â”‚
â”‚ ğŸ›ï¸ ä¸‹å•è´­ä¹°                         â”‚
â”‚    â””â”€ è®¢å• #FD20250110007           â”‚
â”‚    â””â”€ é‡‘é¢ $1,099.00                â”‚
â”‚                                      â”‚
â”‚ 2025-01-10 10:30                    â”‚
â”‚ ğŸ’¬ é¦–æ¬¡å’¨è¯¢                         â”‚
â”‚    â””â”€ äº§å“é€‰å‹ï¼ˆAIæœåŠ¡ï¼‰            â”‚
â”‚                                      â”‚
â”‚ 2025-01-10 10:00                    â”‚
â”‚ ğŸŒ é¦–æ¬¡è®¿é—®ç½‘ç«™                     â”‚
â”‚    â””â”€ æ¥æº: Googleæœç´¢              â”‚
â”‚                                      â”‚
â”‚ [åŠ è½½æ›´å¤š]                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**F2-8: äº’åŠ¨é¢‘ç‡åˆ†æ**

åˆ†æå®¢æˆ·çš„äº’åŠ¨é¢‘ç‡ï¼Œè¯†åˆ«æ´»è·ƒ/æ²‰é»˜å®¢æˆ·ï¼š

**å®¢æˆ·æ´»è·ƒåº¦åˆ†ç±»**ï¼š

| æ´»è·ƒåº¦ | å®šä¹‰ | æ ‡è¯† | ç­–ç•¥ |
|-------|------|-----|------|
| é«˜åº¦æ´»è·ƒ | 30å¤©å†…äº’åŠ¨ > 5æ¬¡ | ğŸ”¥ | é‡ç‚¹ç»´æŠ¤ |
| æ´»è·ƒ | 30å¤©å†…äº’åŠ¨ 2-5æ¬¡ | âœ… | å®šæœŸå…³æ€€ |
| ä¸€èˆ¬ | 30å¤©å†…äº’åŠ¨ 1æ¬¡ | âš¡ | é€‚åº¦å…³æ³¨ |
| æ²‰é»˜ | 30-90å¤©æœªäº’åŠ¨ | ğŸ˜´ | å”¤é†’è¥é”€ |
| æµå¤± | 90å¤©ä»¥ä¸Šæœªäº’åŠ¨ | âŒ | æµå¤±æŒ½å› |

### 2.3 æ•°æ®æ¨¡å‹

**å®¢æˆ·è¡Œä¸ºè¿½è¸ªæ¨¡å‹**ï¼š

```typescript
interface CustomerBehavior {
  customer_id: string

  // è®¿é—®è®°å½•
  visits: {
    first_visit: Date
    last_visit: Date
    total_visits: number
    total_duration: number         // æ€»åœç•™æ—¶é•¿ï¼ˆç§’ï¼‰
    referral_sources: string[]     // æ¥æºæ¸ é“
    device_types: string[]         // ä½¿ç”¨è¿‡çš„è®¾å¤‡ç±»å‹
  }

  // äº§å“æµè§ˆ
  product_views: Array<{
    product_id: string
    product_name: string
    viewed_at: Date
    view_count: number
    total_duration: number
  }>

  // è´­ç‰©è½¦
  cart_events: Array<{
    event_type: 'add' | 'remove' | 'abandon'
    products: any[]
    total_value: number
    created_at: Date
  }>

  // å’¨è¯¢å†å²
  conversation_history: {
    total_conversations: number
    first_conversation: Date
    last_conversation: Date
    average_satisfaction: number
    common_topics: Array<{
      topic: string
      count: number
    }>
  }

  // æ´»åŠ¨æ—¶é—´çº¿
  activity_timeline: Array<{
    event_type: string             // visit/view/cart/chat/order
    event_data: any
    timestamp: Date
  }>

  // æ´»è·ƒåº¦
  engagement: {
    level: 'highly_active' | 'active' | 'normal' | 'dormant' | 'churned'
    last_interaction: Date
    interactions_30d: number       // 30å¤©å†…äº’åŠ¨æ¬¡æ•°
  }
}
```

### 2.4 åç«¯APIè®¾è®¡

**å®¢æˆ·è¡Œä¸ºè¿½è¸ªAPI**ï¼š

```
GET  /api/customers/{customer_id}/behavior          # è·å–è¡Œä¸ºæ•°æ®
GET  /api/customers/{customer_id}/timeline          # è·å–æ´»åŠ¨æ—¶é—´çº¿
GET  /api/customers/{customer_id}/conversations     # è·å–å’¨è¯¢å†å²
POST /api/customers/{customer_id}/track-event       # è¿½è¸ªäº‹ä»¶
GET  /api/customers/engagement-analysis             # æ´»è·ƒåº¦åˆ†æ
```

**å‰ç«¯åŸ‹ç‚¹API**ï¼š

```
POST /api/track/page-view                           # é¡µé¢æµè§ˆ
POST /api/track/product-view                        # äº§å“æµè§ˆ
POST /api/track/cart-event                          # è´­ç‰©è½¦æ“ä½œ
```

### 2.5 éªŒæ”¶æ ‡å‡†

**åŠŸèƒ½éªŒæ”¶**ï¼š
- [ ] ç½‘ç«™è®¿é—®è®°å½•æ­£ç¡®è¿½è¸ª
- [ ] äº§å“æµè§ˆè®°å½•æ­£ç¡®ä¿å­˜
- [ ] è´­ç‰©è½¦äº‹ä»¶æ­£ç¡®è®°å½•
- [ ] å’¨è¯¢å†å²ç»Ÿè®¡å‡†ç¡®
- [ ] å¯¹è¯å†…å®¹åˆ†ææ­£ç¡®ï¼ˆé—®é¢˜ç±»å‹ã€å…³é”®è¯ï¼‰
- [ ] å†å²å¯¹è¯å±•ç¤ºå®Œæ•´
- [ ] æ´»åŠ¨æ—¶é—´çº¿æ­£ç¡®æ˜¾ç¤ºæ‰€æœ‰äº‹ä»¶
- [ ] æ´»è·ƒåº¦åˆ†çº§æ­£ç¡®

**æ•°æ®å‡†ç¡®æ€§éªŒæ”¶**ï¼š
- [ ] è®¿é—®æ—¶é•¿è®¡ç®—å‡†ç¡®
- [ ] äº§å“æµè§ˆæ¬¡æ•°ç»Ÿè®¡æ­£ç¡®
- [ ] è´­ç‰©è½¦æ”¾å¼ƒé‡‘é¢è®¡ç®—å‡†ç¡®
- [ ] æ»¡æ„åº¦å¹³å‡å€¼è®¡ç®—æ­£ç¡®
- [ ] 30å¤©äº’åŠ¨æ¬¡æ•°ç»Ÿè®¡å‡†ç¡®

**æ€§èƒ½éªŒæ”¶**ï¼š
- [ ] è¡Œä¸ºæ•°æ®åŠ è½½æ—¶é—´ < 1ç§’
- [ ] æ´»åŠ¨æ—¶é—´çº¿åŠ è½½æ—¶é—´ < 1.5ç§’
- [ ] æ”¯æŒ100ä¸ªäº‹ä»¶çš„æ—¶é—´çº¿ä¸å¡é¡¿
- [ ] å‰ç«¯åŸ‹ç‚¹ä¸å½±å“é¡µé¢æ€§èƒ½

**UIéªŒæ”¶**ï¼š
- [ ] æ—¶é—´çº¿å¸ƒå±€æ¸…æ™°
- [ ] å†å²å¯¹è¯æ˜“äºæŸ¥çœ‹
- [ ] æ´»è·ƒåº¦æ ‡è¯†é†’ç›®
- [ ] å›¾è¡¨å’Œç»Ÿè®¡ç›´è§‚

---

## ğŸ”— ä¸å…¶ä»–æ¨¡å—çš„å…³ç³»

**ä¾èµ–å…³ç³»**ï¼š
- **ä¾èµ–**: L2-1 Shopifyè®¢å•é›†æˆï¼ˆè®¢å•æ•°æ®ã€å®¢æˆ·æ•°æ®ï¼‰
- **ä¾èµ–**: v3.3.0 å®¢æˆ·ç”»åƒåŸºç¡€åŠŸèƒ½
- **è¢«ä¾èµ–**: L2-2-Part2 å®¢æˆ·åˆ†æä¸ç”Ÿå‘½å‘¨æœŸï¼ˆåŸºäºè¡Œä¸ºæ•°æ®åˆ†æï¼‰

**æ•°æ®æµ**ï¼š
```
Shopify â†’ å®¢æˆ·åŸºç¡€ä¿¡æ¯
å‰ç«¯åŸ‹ç‚¹ â†’ è®¿é—®è®°å½•ã€äº§å“æµè§ˆ
ä¼šè¯ç³»ç»Ÿ â†’ å’¨è¯¢å†å²
è´­ç‰©è½¦API â†’ è´­ç‰©è½¦äº‹ä»¶
  â†“
å®¢æˆ·è¡Œä¸ºè¿½è¸ª
  â†“
æ´»åŠ¨æ—¶é—´çº¿ + æ´»è·ƒåº¦åˆ†æ
  â†“
åå¸­æŸ¥çœ‹ + ç²¾å‡†è¥é”€
```

---

## ğŸ“Š å¼€å‘ä¼˜å…ˆçº§

### ç¬¬ä¸€é˜¶æ®µï¼ˆP0 - å¿…é¡»å®ç°ï¼‰
- [ ] å®¢æˆ·ä¿¡æ¯å­—æ®µæ‰©å±•
- [ ] ä»ShopifyåŒæ­¥å®¢æˆ·æ•°æ®
- [ ] VIPç­‰çº§è‡ªåŠ¨è®¡ç®—
- [ ] å®¢æˆ·ä¿¡æ¯å¡ç‰‡æ˜¾ç¤º
- [ ] å’¨è¯¢å†å²ç»Ÿè®¡

### ç¬¬äºŒé˜¶æ®µï¼ˆP1 - é‡è¦ï¼‰
- [ ] åå¸­æ‰‹åŠ¨ç¼–è¾‘å®¢æˆ·ä¿¡æ¯
- [ ] å¤‡æ³¨å’Œæ ‡ç­¾ç®¡ç†
- [ ] ä¿¡æ¯å®Œæ•´åº¦è®¡ç®—
- [ ] å†å²å¯¹è¯å±•ç¤º
- [ ] æ´»åŠ¨æ—¶é—´çº¿

### ç¬¬ä¸‰é˜¶æ®µï¼ˆP2 - ä¼˜åŒ–ï¼‰
- [ ] ç½‘ç«™è®¿é—®è¿½è¸ªï¼ˆå‰ç«¯åŸ‹ç‚¹ï¼‰
- [ ] äº§å“æµè§ˆè®°å½•
- [ ] è´­ç‰©è½¦äº‹ä»¶è¿½è¸ª
- [ ] å¯¹è¯å†…å®¹åˆ†æ
- [ ] æ´»è·ƒåº¦åˆ†æ

---

## ğŸ§ª æµ‹è¯•è¦ç‚¹

### å•å…ƒæµ‹è¯•
- VIPç­‰çº§è®¡ç®—é€»è¾‘
- ä¿¡æ¯å®Œæ•´åº¦è®¡ç®—
- æ´»è·ƒåº¦åˆ†çº§é€»è¾‘
- å¯¹è¯å†å²ç»Ÿè®¡

### é›†æˆæµ‹è¯•
- Shopifyæ•°æ®åŒæ­¥
- å®¢æˆ·ä¿¡æ¯æ›´æ–°æµç¨‹
- è¡Œä¸ºäº‹ä»¶è¿½è¸ª
- æ—¶é—´çº¿äº‹ä»¶èšåˆ

### æ€§èƒ½æµ‹è¯•
- 1000ä¸ªå®¢æˆ·çš„ä¿¡æ¯åŠ è½½
- 100ä¸ªäº‹ä»¶çš„æ—¶é—´çº¿æ¸²æŸ“
- å¹¶å‘ç¼–è¾‘å®¢æˆ·ä¿¡æ¯

---

## ğŸ“ å®æ–½æ³¨æ„äº‹é¡¹

### æŠ€æœ¯çº¦æŸ
1. **éšç§ä¿æŠ¤**ï¼šå®¢æˆ·ä¿¡æ¯å¿…é¡»åŠ å¯†å­˜å‚¨ï¼Œéµå®ˆGDPR
2. **æ•°æ®åŒæ­¥**ï¼šShopifyæ•°æ®å®æ—¶åŒæ­¥ï¼Œå»¶è¿Ÿ < 5ç§’
3. **ç¼“å­˜ç­–ç•¥**ï¼šå®¢æˆ·ä¿¡æ¯ç¼“å­˜ 10 åˆ†é’Ÿ
4. **åŸ‹ç‚¹æ€§èƒ½**ï¼šå‰ç«¯åŸ‹ç‚¹ä¸èƒ½å½±å“é¡µé¢åŠ è½½é€Ÿåº¦

### å¼€å‘å»ºè®®
1. å…ˆå®ç°åŸºç¡€ä¿¡æ¯ç®¡ç†ï¼Œå†å®ç°è¡Œä¸ºè¿½è¸ª
2. å…ˆå®ç°ShopifyåŒæ­¥ï¼Œå†å®ç°æ‰‹åŠ¨ç¼–è¾‘
3. ä½¿ç”¨Redisç¼“å­˜å®¢æˆ·æ•°æ®
4. å‰ç«¯åŸ‹ç‚¹å¼‚æ­¥å‘é€ï¼Œä¸é˜»å¡UI

### Fiido ç”µåŠ¨è‡ªè¡Œè½¦ä¸šåŠ¡ç‰¹ç‚¹
- å®¢å•ä»·é«˜ï¼Œéœ€è¦é‡ç‚¹ç»´æŠ¤VIPå®¢æˆ·
- äº§å“æµè§ˆæ—¶é—´é•¿ï¼Œéœ€è¦è®°å½•æµè§ˆåå¥½
- è´­ç‰©è½¦æ”¾å¼ƒç‡é«˜ï¼Œéœ€è¦ä¸»åŠ¨æé†’
- å”®åå’¨è¯¢å¤šï¼Œéœ€è¦è®°å½•å†å²é—®é¢˜

---

## ğŸ“š å‚è€ƒèµ„æ–™

- **Shopify Customer API**: https://shopify.dev/docs/api/admin-rest/customers
- **GDPR åˆè§„**: https://gdpr.eu/
- **æŠ€æœ¯çº¦æŸ**: `prd/02_çº¦æŸä¸åŸåˆ™/CONSTRAINTS_AND_PRINCIPLES.md`
- **APIå¥‘çº¦**: `prd/03_æŠ€æœ¯æ–¹æ¡ˆ/api_contract.md`

---

**ä¸‹ä¸€æ­¥**: é˜…è¯» `L2-2-Part2_å®¢æˆ·åˆ†æä¸ç”Ÿå‘½å‘¨æœŸ.md`

**æ–‡æ¡£ç»´æŠ¤è€…**: Claude Code
**æœ€åæ›´æ–°**: 2025-01-27
