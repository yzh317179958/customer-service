# [功能名称] - 架构说明

> **文档类型**：跨模块功能架构说明
> **最后更新**：YYYY-MM-DD
> **对应 PRD**：`docs/features/[功能名]/prd.md`

---

## 一、整体架构

### 1.1 模块交互图

```
┌─────────────────────────────────────────────────────────────────┐
│                        用户界面层                                │
│                                                                 │
│   ┌─────────────────┐         ┌─────────────────┐              │
│   │  products/xxx   │         │  products/yyy   │              │
│   │    前端界面     │◄───────►│    前端界面     │              │
│   └────────┬────────┘         └────────┬────────┘              │
└────────────┼────────────────────────────┼───────────────────────┘
             │                            │
             ▼                            ▼
┌─────────────────────────────────────────────────────────────────┐
│                        API 层                                    │
│                                                                 │
│   ┌─────────────────┐         ┌─────────────────┐              │
│   │  products/xxx   │         │  products/yyy   │              │
│   │    后端 API     │         │    后端 API     │              │
│   └────────┬────────┘         └────────┬────────┘              │
└────────────┼────────────────────────────┼───────────────────────┘
             │                            │
             └───────────┬────────────────┘
                         ▼
┌─────────────────────────────────────────────────────────────────┐
│                        服务层                                    │
│                                                                 │
│   ┌─────────────────┐         ┌─────────────────┐              │
│   │  services/aaa   │         │  services/bbb   │              │
│   │    [服务A]      │◄───────►│    [服务B]      │              │
│   └────────┬────────┘         └────────┬────────┘              │
└────────────┼────────────────────────────┼───────────────────────┘
             │                            │
             └───────────┬────────────────┘
                         ▼
┌─────────────────────────────────────────────────────────────────┐
│                     基础设施层                                   │
│                                                                 │
│   ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐       │
│   │ database │  │  cache   │  │  logging │  │ security │       │
│   └──────────┘  └──────────┘  └──────────┘  └──────────┘       │
└─────────────────────────────────────────────────────────────────┘
```

### 1.2 数据流

```
[触发源] ──► [模块1 处理] ──► [服务层] ──► [模块2 响应]
                                │
                                ▼
                          [数据持久化]
```

---

## 二、模块详情

### 2.1 products/xxx/

**职责**：[该模块在此功能中的职责]

**新增/修改文件**：

#### `handlers/xxx.py`

**用途**: [文件用途]

**主要函数**:
- `function_name()` - [功能描述]
- `another_function()` - [功能描述]

**依赖关系**:
- 依赖: `services/aaa/service.py`
- 被依赖: 前端组件

#### `frontend/components/Xxx.tsx`

**用途**: [文件用途]

**主要组件**:
- `<ComponentName />` - [功能描述]

**状态管理**:
- 使用 `useXxxStore` 管理状态

---

### 2.2 products/yyy/

**职责**：[该模块在此功能中的职责]

**新增/修改文件**：

#### `handlers/yyy.py`

**用途**: [文件用途]

**主要函数**:
- `function_name()` - [功能描述]

---

### 2.3 services/aaa/

**职责**：[该服务在此功能中的职责]

**新增/修改文件**：

#### `service.py`

**用途**: [文件用途]

**主要类/函数**:
- `ServiceClass` - [功能描述]
  - `method1()` - [方法描述]
  - `method2()` - [方法描述]

---

## 三、接口定义

### 3.1 模块间 API

#### POST `/api/xxx/action`

**描述**: [接口描述]

**请求体**:
```json
{
  "field1": "value1",
  "field2": 123
}
```

**响应**:
```json
{
  "success": true,
  "data": {
    "result": "..."
  }
}
```

### 3.2 事件定义

| 事件名 | 发布者 | 订阅者 | 触发时机 |
|--------|--------|--------|----------|
| `event_name` | products/xxx | products/yyy | [时机] |

---

## 四、数据模型

### 4.1 数据库表

#### `table_name`

| 字段 | 类型 | 说明 |
|------|------|------|
| id | INTEGER | 主键 |
| field1 | VARCHAR(255) | [说明] |
| created_at | TIMESTAMP | 创建时间 |

### 4.2 缓存 Key

| Key 模式 | 数据类型 | TTL | 说明 |
|----------|----------|-----|------|
| `prefix:{id}` | Hash | 3600s | [说明] |

---

## 五、依赖关系图

```
products/xxx
    │
    ├──► services/aaa
    │        │
    │        └──► infrastructure/database
    │
    └──► infrastructure/security

products/yyy
    │
    ├──► services/aaa (共享)
    │
    └──► services/bbb
             │
             └──► infrastructure/cache
```

---

## 六、扩展点

### 6.1 预留扩展

| 扩展点 | 位置 | 说明 |
|--------|------|------|
| [扩展1] | `services/aaa/` | [如何扩展] |

### 6.2 未来优化

- [ ] [优化项1]
- [ ] [优化项2]
