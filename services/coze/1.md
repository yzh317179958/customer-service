# Coze Shopify è®¢å•æŸ¥è¯¢æ’ä»¶é…ç½®æŒ‡å—

> **æ–‡æ¡£ç‰ˆæœ¬**: v4.1
> **æ›´æ–°æ—¶é—´**: 2025-12-24
> **æ›´æ–°å†…å®¹**: ä¿®æ­£ API è°ƒç”¨æµç¨‹ï¼Œä¿ç•™ getOrderTracking ç”¨äºè·å–ç‰©æµè¯æœ¯æ¨¡æ¿

## ä¸€ã€API æ¸…å•

å…± **3 ä¸ªæ ¸å¿ƒ API**ï¼Œå…¨éƒ¨æ”¯æŒå¤šç«™ç‚¹è‡ªåŠ¨è¯†åˆ«ï¼š

| API | åŠŸèƒ½ | è¾“å…¥å‚æ•° | ä½¿ç”¨åœºæ™¯ |
|-----|------|---------|---------|
| `searchOrderByNumber` | æŒ‰è®¢å•å·æœç´¢è®¢å•ï¼ˆå…¨ç«™ç‚¹ï¼‰ | `q`: è®¢å•å· | â­ å¸¸ç”¨ - ç”¨æˆ·æä¾›è®¢å•å·æ—¶ |
| `getOrdersByEmail` | æŒ‰é‚®ç®±æŸ¥è¯¢è®¢å•åˆ—è¡¨ï¼ˆå…¨ç«™ç‚¹ï¼‰ | `email`: é‚®ç®± | â­ å¸¸ç”¨ - ç”¨æˆ·æä¾›é‚®ç®±æ—¶ |
| `getOrderTracking` | è·å–ç‰©æµè¿½è¸ªè¯¦æƒ… | `order_id`: è®¢å•ID | è·å–ç‰©æµè¯æœ¯æ¨¡æ¿æ—¶ä½¿ç”¨ |

> âš ï¸ **v4.1 è¯´æ˜**ï¼š
> - `searchOrderByNumber` è¿”å›å•†å“çº§çŠ¶æ€ï¼ˆ`delivery_status_zh/en`ï¼‰ï¼Œç”¨äºå•†å“çŠ¶æ€å±•ç¤º
> - `getOrderTracking` è¿”å›ç‰©æµè¯æœ¯æ¨¡æ¿ï¼ˆ`message_template_zh/en`ï¼‰å’Œä¸»ç‰©æµä¿¡æ¯ï¼ˆ`primary_tracking`ï¼‰ï¼Œç”¨äºç‰©æµè¯¦æƒ…å±•ç¤º

**æ”¯æŒçš„ç«™ç‚¹ï¼ˆ9ä¸ªï¼‰**ï¼šUSã€UKã€EUã€DEã€FRã€ITã€ESã€NLã€PL

**è‡ªåŠ¨è¯†åˆ«è§„åˆ™**ï¼š
- è®¢å•å·å‰ç¼€ UK â†’ è‹±å›½ç«™
- è®¢å•å·å‰ç¼€ DE â†’ å¾·å›½ç«™
- è®¢å•å·å‰ç¼€ EU â†’ æ¬§æ´²ç«™
- è®¢å•å·å‰ç¼€ FR â†’ æ³•å›½ç«™
- è®¢å•å·å‰ç¼€ IT â†’ æ„å¤§åˆ©ç«™
- è®¢å•å·å‰ç¼€ ES â†’ è¥¿ç­ç‰™ç«™
- è®¢å•å·å‰ç¼€ NL â†’ è·å…°ç«™
- è®¢å•å·å‰ç¼€ PL â†’ æ³¢å…°ç«™
- çº¯æ•°å­—æˆ–æ— å‰ç¼€ â†’ éå†æ‰€æœ‰ç«™ç‚¹æŸ¥æ‰¾

---

## äºŒã€å…³é”®å­—æ®µè¯´æ˜ï¼ˆâš ï¸ å¿…è¯»ï¼‰

### å•†å“çŠ¶æ€å­—æ®µ

API è¿”å›çš„ `line_items` ä¸­åŒ…å«ä»¥ä¸‹çŠ¶æ€å­—æ®µï¼š

| å­—æ®µ | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|------|------|--------|
| `delivery_status` | çŠ¶æ€ä»£ç ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰ | `success`ã€`in_transit`ã€`returned` |
| `delivery_status_zh` | **ä¸­æ–‡çŠ¶æ€ï¼ˆç›´æ¥æ˜¾ç¤ºç”¨ï¼‰** | å·²æ”¶è´§ã€è¿è¾“ä¸­ã€å·²é€€è´§é€€æ¬¾ |
| `delivery_status_en` | **è‹±æ–‡çŠ¶æ€ï¼ˆç›´æ¥æ˜¾ç¤ºç”¨ï¼‰** | Receivedã€In Transitã€Returned & Refunded |
| `fulfillment_status` | Shopify åŸç”Ÿå‘è´§çŠ¶æ€ï¼ˆä»…å‚è€ƒï¼‰ | `fulfilled`ã€`null` |

### âš ï¸ é‡è¦è§„åˆ™

**å¿…é¡»ç›´æ¥ä½¿ç”¨ `delivery_status_zh` æˆ– `delivery_status_en` å­—æ®µçš„å€¼ï¼Œç¦æ­¢ AI è‡ªè¡Œåˆ¤æ–­æˆ–ç¿»è¯‘çŠ¶æ€ï¼**

åŸå› ï¼š
1. åç«¯å·²å®Œæˆå¤æ‚çš„çŠ¶æ€åˆ¤æ–­é€»è¾‘ï¼ˆé€€æ¬¾ã€ç‰©æµã€17track æ•°æ®èåˆï¼‰
2. AI è‡ªè¡Œåˆ¤æ–­ä¼šå¯¼è‡´çŠ¶æ€ä¸ä¸€è‡´ï¼ˆå¦‚æŠŠ"å·²æ”¶è´§"é”™è¯¯æ˜¾ç¤ºä¸º"å·²å‘è´§"ï¼‰

### çŠ¶æ€å¯¹ç…§è¡¨

| delivery_status | delivery_status_zh | delivery_status_en | å‰ç«¯æ ·å¼ |
|-----------------|--------------------|--------------------|----------|
| `returned` | å·²é€€è´§é€€æ¬¾ | Returned & Refunded | ç´«è‰² |
| `refunded` | å·²é€€æ¬¾ | Refunded | ç°è‰² |
| `expired` | å·²å¤±æ•ˆ | Expired | ç°è‰² |
| `cancelled` | å·²å–æ¶ˆ | Cancelled | æµ…ç°è‰² |
| `active` | å·²ç”Ÿæ•ˆ | Active | ç»¿è‰²ï¼ˆæœåŠ¡ç±»å•†å“ï¼‰ |
| `success` | å·²æ”¶è´§ | Received | ç»¿è‰² |
| `in_transit` | è¿è¾“ä¸­ | In Transit | è“è‰² |
| `out_for_delivery` | æ´¾é€ä¸­ | Out for Delivery | è“è‰² |
| `failure` | æŠ•é€’å¤±è´¥ | Delivery Failed | çº¢è‰² |
| `null`ï¼ˆæ— çŠ¶æ€ï¼‰ | å·²å‘è´§ | Shipped | é’è‰² |
| `null`ï¼ˆæœªå‘è´§ï¼‰ | å¾…å‘è´§ | Pending | é»„è‰² |

---

## ä¸‰ã€æ„å›¾åˆ†ç±»ï¼ˆ5ä¸ªï¼‰

| æ„å›¾ | è§¦å‘æ¡ä»¶ | è°ƒç”¨API | è¯´æ˜ |
|------|---------|---------|------|
| **order_query** | ç”¨æˆ·æä¾›äº†è®¢å•å· | searchOrderByNumber | æŸ¥è®¢å•è¯¦æƒ…+å•†å“çŠ¶æ€ |
| **order_list** | ç”¨æˆ·æä¾›äº†é‚®ç®±ï¼Œæ²¡æœ‰è®¢å•å· | getOrdersByEmail | æŸ¥è¯¥å®¢æˆ·çš„è®¢å•åˆ—è¡¨ |
| **order_guide** | æƒ³æŸ¥è®¢å•ä½†æ²¡æœ‰æä¾›è®¢å•å·å’Œé‚®ç®± | æ—  | å¼•å¯¼ç”¨æˆ·æä¾›ä¿¡æ¯ |
| **product_consult** | å’¨è¯¢Fiidoäº§å“ç›¸å…³é—®é¢˜ | çŸ¥è¯†åº“æ£€ç´¢ | äº§å“å’¨è¯¢ |
| **general_chat** | é—²èŠã€é—®å€™ã€æ— å…³é—®é¢˜ | æ—  | é€šç”¨å›å¤ |

---

## å››ã€Coze å·¥ä½œæµèŠ‚ç‚¹é…ç½®

### æ•´ä½“æµç¨‹å›¾ï¼ˆv4.1 ä¿®æ­£ç‰ˆï¼‰

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    å¼€å§‹     â”‚
                    â”‚  (ç”¨æˆ·è¾“å…¥)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ èŠ‚ç‚¹1: æ„å›¾è¯†åˆ« â”‚
                    â”‚   (LLMèŠ‚ç‚¹)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ èŠ‚ç‚¹2: JSONè§£æ â”‚
                    â”‚ (Deserialization) â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ èŠ‚ç‚¹3: é€‰æ‹©å™¨  â”‚
                    â”‚  (åˆ†æ”¯èŠ‚ç‚¹)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
        â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“      â†“      â†“         â†“          â†“
   order_   order_  order_   product_   general_
   query    list    guide    consult    chat
        â†“      â†“      â†“         â†“          â†“
   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”     â”‚
   â”‚ è®¢å•æŸ¥è¯¢     â”‚ â”‚  â”‚    â”‚çŸ¥è¯†åº“æ£€ç´¢â”‚     â”‚
   â”‚searchOrder  â”‚ â”‚  â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚         â†“          â”‚
        â†“          â”‚  â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”     â”‚
   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚    â”‚æ™ºèƒ½å›å¤  â”‚     â”‚
   â”‚ ç‰©æµæŸ¥è¯¢     â”‚ â”‚  â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â”‚
   â”‚getTracking  â”‚ â”‚  â”‚         â”‚          â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚         â”‚          â”‚
        â†“          â†“  â†“         â†“          â†“
   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”
   â”‚              æ ¼å¼åŒ–å›å¤ (LLM)                 â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   ç»“æŸ   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> âš ï¸ **v4.1 è¯´æ˜**ï¼šorder_query åˆ†æ”¯ä¿ç•™ä¸¤æ¬¡ API è°ƒç”¨ï¼š
> 1. `searchOrderByNumber` - è·å–è®¢å•è¯¦æƒ…å’Œå•†å“çŠ¶æ€ï¼ˆ`delivery_status_zh`ï¼‰
> 2. `getOrderTracking` - è·å–ç‰©æµè¯æœ¯æ¨¡æ¿ï¼ˆ`message_template_zh`ï¼‰å’Œä¸»ç‰©æµä¿¡æ¯

---

### èŠ‚ç‚¹1: æ„å›¾è¯†åˆ«ï¼ˆLLMèŠ‚ç‚¹ï¼‰

**èŠ‚ç‚¹åç§°**: `æ„å›¾è¯†åˆ«`

**Prompt**: å‚è€ƒ `prompts/æ„å›¾è¯†åˆ«.md`

**è¾“å‡ºæ ¼å¼ï¼ˆJSONï¼‰**:
```json
{
  "intent": "order_query|order_list|order_guide|product_consult|general_chat",
  "sub_intent": "product_info|product_compare|product_price|product_purchase|product_aftermarket|product_usage|null",
  "order_number": "æå–çš„è®¢å•å·æˆ–null",
  "email": "æå–çš„é‚®ç®±æˆ–null",
  "confidence": 0.95,
  "reason": "åˆ¤æ–­ç†ç”±"
}
```

**è¾“å‡ºå˜é‡**: `intent_output`

---

### èŠ‚ç‚¹2: JSON Deserialization

**èŠ‚ç‚¹åç§°**: `JSONè§£æ`

**è¾“å…¥**: `{{intent_output}}`

**è¾“å‡ºå˜é‡**: `parsed`

---

### èŠ‚ç‚¹3: é€‰æ‹©å™¨ï¼ˆåˆ†æ”¯èŠ‚ç‚¹ï¼‰

**åˆ†æ”¯æ¡ä»¶**:

| åˆ†æ”¯ | æ¡ä»¶ | èµ°å‘ |
|------|------|------|
| åˆ†æ”¯1 | `{{parsed.intent}} == "order_query"` | â†’ è®¢å•æŸ¥è¯¢èŠ‚ç‚¹ |
| åˆ†æ”¯2 | `{{parsed.intent}} == "order_list"` | â†’ é‚®ç®±æŸ¥è¯¢èŠ‚ç‚¹ |
| åˆ†æ”¯3 | `{{parsed.intent}} == "order_guide"` | â†’ å¼•å¯¼å›å¤èŠ‚ç‚¹ |
| åˆ†æ”¯4 | `{{parsed.intent}} == "product_consult"` | â†’ äº§å“å’¨è¯¢èŠ‚ç‚¹ |
| é»˜è®¤ | å…¶ä»–æƒ…å†µ | â†’ é€šç”¨å›å¤èŠ‚ç‚¹ |

---

### åˆ†æ”¯1: order_queryï¼ˆè®¢å•æŸ¥è¯¢æµç¨‹ï¼‰

#### èŠ‚ç‚¹4A: è®¢å•æŸ¥è¯¢ï¼ˆæ’ä»¶èŠ‚ç‚¹ï¼‰

**èŠ‚ç‚¹åç§°**: `è®¢å•æŸ¥è¯¢`

**è°ƒç”¨å·¥å…·**: `searchOrderByNumber`

**è¾“å…¥å‚æ•°**:
```
q: {{parsed.order_number}}
```

**è¾“å‡ºå˜é‡**: `order_result`

**è¯´æ˜**:
- API è‡ªåŠ¨è¯†åˆ«ç«™ç‚¹ï¼ˆæ ¹æ®è®¢å•å·å‰ç¼€ï¼‰
- è¿”å›å®Œæ•´è®¢å•ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ¯ä¸ªå•†å“çš„ `delivery_status_zh/en` çŠ¶æ€

#### èŠ‚ç‚¹4B: ç‰©æµæŸ¥è¯¢ï¼ˆæ’ä»¶èŠ‚ç‚¹ï¼‰

**èŠ‚ç‚¹åç§°**: `ç‰©æµæŸ¥è¯¢`

**è°ƒç”¨å·¥å…·**: `getOrderTracking`

**è¾“å…¥å‚æ•°**:
```
order_id: {{order_result.data.order.order_id}}
```

**è¾“å‡ºå˜é‡**: `tracking_result`

**è¯´æ˜**:
- è¿”å›ç‰©æµè¯æœ¯æ¨¡æ¿ï¼ˆ`message_template_zh/en`ï¼‰
- è¿”å›ä¸»ç‰©æµä¿¡æ¯ï¼ˆ`primary_tracking`ï¼‰
- è¿”å›ç‰©æµçŠ¶æ€ç¿»è¯‘ï¼ˆ`status_zh/en`ï¼‰

#### èŠ‚ç‚¹4C: è®¢å•å›å¤ï¼ˆLLMèŠ‚ç‚¹ï¼‰âš ï¸ å…³é”®é…ç½®

**èŠ‚ç‚¹åç§°**: `è®¢å•å›å¤`

**Promptï¼ˆv4.1 æ›´æ–°ï¼‰**:
```
ä½ æ˜¯ Fiido æ™ºèƒ½å®¢æœã€‚æ ¹æ®è®¢å•æ•°æ®å’Œç‰©æµæ•°æ®ç”Ÿæˆå›å¤ã€‚

## è®¢å•æ•°æ®
{{order_result}}

## ç‰©æµæ•°æ®
{{tracking_result}}

## âš ï¸ é‡è¦è§„åˆ™

1. **å•†å“çŠ¶æ€å¿…é¡»ç›´æ¥ä½¿ç”¨ `delivery_status_zh`ï¼ˆä¸­æ–‡ï¼‰æˆ– `delivery_status_en`ï¼ˆè‹±æ–‡ï¼‰å­—æ®µçš„å€¼**
   - æ¥æºï¼šorder_result.data.order.line_items[].delivery_status_zh
   - ç¦æ­¢è‡ªå·±åˆ¤æ–­æˆ–ç¿»è¯‘çŠ¶æ€
   - ç¦æ­¢ä½¿ç”¨ fulfillment_status å­—æ®µæ¥åˆ¤æ–­å•†å“çŠ¶æ€
   - ç¤ºä¾‹ï¼šå¦‚æœ delivery_status_zh = "å·²æ”¶è´§"ï¼Œå°±æ˜¾ç¤º"å·²æ”¶è´§"ï¼Œä¸è¦æ”¹æˆ"å·²å‘è´§"

2. **ç‰©æµçŠ¶æ€å¯ä»¥ä½¿ç”¨ tracking_result çš„ primary_tracking.status_zh**
   - ç”¨äºæ˜¾ç¤ºæ•´ä½“ç‰©æµçŠ¶æ€
   - å¯ä»¥ç›´æ¥ä½¿ç”¨ message_template_zh/en ä½œä¸ºç‰©æµè¯¦æƒ…

3. **å•†å“å¡ç‰‡æ ¼å¼**ï¼ˆæ¯ä¸ªå•†å“ä¸€è¡Œï¼Œä½¿ç”¨ [PRODUCT] æ ‡è®°ï¼‰ï¼š
   [PRODUCT]å›¾ç‰‡URL|å•†å“åç§°|æ•°é‡|ä»·æ ¼|çŠ¶æ€|æ‰¿è¿å•†|è¿å•å·|è¿½è¸ªé“¾æ¥[/PRODUCT]

   å­—æ®µæ˜ å°„ï¼š
   - å›¾ç‰‡URL: order_result.data.order.line_items[].image_url
   - å•†å“åç§°: order_result.data.order.line_items[].title
   - æ•°é‡: order_result.data.order.line_items[].quantity
   - ä»·æ ¼: order_result.data.order.line_items[].price + currency
   - çŠ¶æ€: order_result.data.order.line_items[].delivery_status_zhï¼ˆâš ï¸ ç›´æ¥ä½¿ç”¨ï¼Œä¸è¦ä¿®æ”¹ï¼ï¼‰
   - æ‰¿è¿å•†: order_result.data.order.line_items[].tracking_company
   - è¿å•å·: order_result.data.order.line_items[].tracking_number
   - è¿½è¸ªé“¾æ¥: order_result.data.order.line_items[].tracking_url

4. **è¯­è¨€é€‚é…**ï¼š
   - æ ¹æ®ç”¨æˆ·è¾“å…¥è¯­è¨€é€‰æ‹© delivery_status_zhï¼ˆä¸­æ–‡ï¼‰æˆ– delivery_status_enï¼ˆè‹±æ–‡ï¼‰
   - ä¸­æ–‡ç”¨æˆ·ç”¨ä¸­æ–‡å›å¤ï¼Œè‹±æ–‡ç”¨æˆ·ç”¨è‹±æ–‡å›å¤

## å›å¤æ¨¡æ¿

### ä¸­æ–‡å›å¤ç¤ºä¾‹ï¼š
æ‚¨å¥½ï¼ä¸ºæ‚¨æŸ¥è¯¢åˆ°è®¢å• {{order_number}} çš„ä¿¡æ¯ï¼š

[PRODUCT]{{image_url}}|{{title}}|{{quantity}}|{{currency}}{{price}}|{{delivery_status_zh}}|{{tracking_company}}|{{tracking_number}}|{{tracking_url}}[/PRODUCT]

å¦‚æœ‰å…¶ä»–é—®é¢˜ï¼Œè¯·éšæ—¶å’¨è¯¢ï¼

### è‹±æ–‡å›å¤ç¤ºä¾‹ï¼š
Hi! Here's the information for your order {{order_number}}:

[PRODUCT]{{image_url}}|{{title}}|{{quantity}}|{{currency}}{{price}}|{{delivery_status_en}}|{{tracking_company}}|{{tracking_number}}|{{tracking_url}}[/PRODUCT]

If you have any questions, feel free to ask!

## ç‰¹æ®Šæƒ…å†µå¤„ç†

1. è®¢å•æœªæ‰¾åˆ°ï¼ˆorder_result.data.order == nullï¼‰ï¼š
   - æç¤ºç”¨æˆ·æ£€æŸ¥è®¢å•å·æ˜¯å¦æ­£ç¡®
   - å»ºè®®æä¾›é‚®ç®±æŸ¥è¯¢

2. å•†å“æ— ç‰©æµä¿¡æ¯ï¼ˆtracking_number ä¸ºç©ºï¼‰ï¼š
   - æœåŠ¡ç±»å•†å“ï¼ˆå¦‚ Worry-Free Purchaseï¼‰æ­£å¸¸ï¼Œä¸éœ€è¦ç‰©æµ
   - å®ç‰©å•†å“æ— ç‰©æµè¯´æ˜è¿˜æœªå‘è´§ï¼Œæ˜¾ç¤º"å¾…å‘è´§"çŠ¶æ€
```

---

### åˆ†æ”¯2: order_listï¼ˆé‚®ç®±æŸ¥è¯¢æµç¨‹ï¼‰

#### èŠ‚ç‚¹5A: é‚®ç®±æŸ¥è¯¢ï¼ˆæ’ä»¶èŠ‚ç‚¹ï¼‰

**èŠ‚ç‚¹åç§°**: `é‚®ç®±æŸ¥è¯¢`

**è°ƒç”¨å·¥å…·**: `getOrdersByEmail`

**è¾“å…¥å‚æ•°**:
```
email: {{parsed.email}}
limit: 5
```

**è¾“å‡ºå˜é‡**: `order_list_result`

#### èŠ‚ç‚¹5B: è®¢å•åˆ—è¡¨å›å¤ï¼ˆLLMèŠ‚ç‚¹ï¼‰

**Prompt**:
```
æ ¹æ®è®¢å•åˆ—è¡¨æ•°æ®ï¼Œç”Ÿæˆå‹å¥½çš„å®¢æœå›å¤ã€‚

## è®¢å•åˆ—è¡¨æ•°æ®
{{order_list_result}}

## å›å¤è¦æ±‚
1. åˆ—å‡ºæ‰€æœ‰è®¢å•çš„åŸºæœ¬ä¿¡æ¯ï¼ˆè®¢å•å·ã€é‡‘é¢ã€æ—¥æœŸï¼‰
2. è¯¢é—®ç”¨æˆ·éœ€è¦æŸ¥è¯¢å“ªä¸ªè®¢å•çš„è¯¦æƒ…

## å›å¤æ¨¡æ¿
Hi! Here are the orders associated with your email:

ğŸ“¦ Order {{order_number}} - {{total_price}} {{currency}} ({{created_at}})

Which order would you like to know more about?
```

---

### åˆ†æ”¯3: order_guideï¼ˆå¼•å¯¼å›å¤ï¼‰

**è¾“å‡ºå†…å®¹**:
```
Hi! I can help you check your order status.

Please provide one of the following:
1. ğŸ“ Order number (e.g., UK22080, DE10019, EU10019)
2. ğŸ“§ Email address used for the order

With this information, I can look up your order and shipping details!
```

---

### åˆ†æ”¯4: product_consultï¼ˆäº§å“å’¨è¯¢æµç¨‹ï¼‰

åŒåŸæœ‰é…ç½®ï¼Œä½¿ç”¨çŸ¥è¯†åº“æ£€ç´¢ + æ™ºèƒ½å›å¤ã€‚

---

### åˆ†æ”¯5: general_chatï¼ˆé€šç”¨å›å¤ï¼‰

åŒåŸæœ‰é…ç½®ã€‚

---

## äº”ã€v4.1 ä¼˜åŒ–æ€»ç»“

### æ ¸å¿ƒå˜æ›´

| å˜æ›´é¡¹ | è¯´æ˜ |
|--------|------|
| ä¿ç•™ getOrderTracking | ç”¨äºè·å–ç‰©æµè¯æœ¯æ¨¡æ¿å’Œä¸»ç‰©æµä¿¡æ¯ |
| å¼ºåˆ¶ä½¿ç”¨ delivery_status_zh/en | ç¦æ­¢ AI è‡ªè¡Œåˆ¤æ–­æˆ–ç¿»è¯‘çŠ¶æ€ |
| æ˜ç¡®å­—æ®µæ¥æº | å•†å“çŠ¶æ€æ¥è‡ª order_resultï¼Œç‰©æµçŠ¶æ€æ¥è‡ª tracking_result |

### ä¸¤ä¸ª API çš„åˆ†å·¥

| API | æä¾›çš„æ•°æ® | ç”¨é€” |
|-----|-----------|------|
| searchOrderByNumber | è®¢å•è¯¦æƒ…ã€å•†å“åˆ—è¡¨ã€`delivery_status_zh/en` | å•†å“çŠ¶æ€å±•ç¤º |
| getOrderTracking | `primary_tracking`ã€`message_template_zh/en` | ç‰©æµè¯¦æƒ…å±•ç¤º |

### çŠ¶æ€å­—æ®µæ¥æºè¯´æ˜

| å­—æ®µ | æ¥æº | è¯´æ˜ |
|------|------|------|
| `delivery_status_zh` | order_result.data.order.line_items[] | å•†å“é€è¾¾çŠ¶æ€ï¼ˆå·²æ”¶è´§/è¿è¾“ä¸­/å·²é€€æ¬¾ç­‰ï¼‰ |
| `primary_tracking.status_zh` | tracking_result.data.tracking | ä¸»ç‰©æµçŠ¶æ€ï¼ˆå·²æ”¶è´§/è¿è¾“ä¸­ç­‰ï¼‰ |
| `message_template_zh` | tracking_result.data.tracking | é¢„ç”Ÿæˆçš„ç‰©æµè¯æœ¯æ¨¡æ¿ |

---

## å…­ã€æµ‹è¯•ç”¨ä¾‹

### æµ‹è¯•1: å·²æ”¶è´§è®¢å•ï¼ˆDE10091ï¼‰

```
ç”¨æˆ·: æŸ¥è®¢å• DE10091
é¢„æœŸ:
- è°ƒç”¨ searchOrderByNumber(q="DE10091")
- Frontkorb å•†å“çŠ¶æ€æ˜¾ç¤º"å·²æ”¶è´§"ï¼ˆdelivery_status_zh="å·²æ”¶è´§"ï¼‰
- C11 E-Bike å•†å“çŠ¶æ€æ˜¾ç¤º"å·²æ”¶è´§"
```

### æµ‹è¯•2: è¿è¾“ä¸­è®¢å•

```
ç”¨æˆ·: Order UK22103
é¢„æœŸ:
- Titan battery å•†å“çŠ¶æ€æ˜¾ç¤º"è¿è¾“ä¸­"ï¼ˆå¦‚æœ delivery_status_zh="è¿è¾“ä¸­"ï¼‰
- Worry-Free Purchase å•†å“çŠ¶æ€æ˜¾ç¤º"å·²ç”Ÿæ•ˆ"
```

### æµ‹è¯•3: éƒ¨åˆ†é€€æ¬¾è®¢å•

```
ç”¨æˆ·: è®¢å• UK22081
é¢„æœŸ:
- å·²é€€æ¬¾å•†å“æ˜¾ç¤º"å·²é€€æ¬¾"
- æœªé€€æ¬¾å•†å“æ­£å¸¸æ˜¾ç¤ºç‰©æµçŠ¶æ€
```

---

## ä¸ƒã€å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆå•†å“çŠ¶æ€æ˜¾ç¤ºä¸æ­£ç¡®ï¼Ÿ

æ£€æŸ¥ Coze Prompt æ˜¯å¦ç›´æ¥ä½¿ç”¨äº† `delivery_status_zh` å­—æ®µã€‚å¸¸è§é”™è¯¯ï¼š
- âŒ ä½¿ç”¨ fulfillment_status åˆ¤æ–­ï¼ˆä¼šé”™è¯¯æ˜¾ç¤º"å·²å‘è´§"ï¼‰
- âŒ AI è‡ªå·±ç¿»è¯‘çŠ¶æ€ï¼ˆä¼šä¸ä¸€è‡´ï¼‰
- âœ… ç›´æ¥ä½¿ç”¨ delivery_status_zh çš„å€¼

### Q2: ä¸ºä»€ä¹ˆæŸäº›å•†å“æ²¡æœ‰ç‰©æµä¿¡æ¯ï¼Ÿ

1. æœåŠ¡ç±»å•†å“ï¼ˆWorry-Free Purchaseï¼‰ä¸éœ€è¦ç‰©æµ
2. å®ç‰©å•†å“è¿˜æœªå‘è´§
3. 17track æš‚æœªè¿”å›æ•°æ®ï¼ˆåˆ·æ–°åä¼šæ›´æ–°ï¼‰

### Q3: getOrderTracking API è¿˜èƒ½ç”¨å—ï¼Ÿ

å¯ä»¥ç”¨ï¼Œä½†ä¸æ¨èã€‚searchOrderByNumber è¿”å›çš„æ•°æ®å·²åŒ…å«ï¼š
- æ¯ä¸ªå•†å“çš„ tracking_companyã€tracking_numberã€tracking_url
- å·²è®¡ç®—å¥½çš„ delivery_status_zh/en

åªæœ‰éœ€è¦æŸ¥çœ‹è¯¦ç»†ç‰©æµè½¨è¿¹æ—¶æ‰éœ€è¦å•ç‹¬è°ƒç”¨ç‰©æµ APIã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**: v4.1
**æ›´æ–°æ—¶é—´**: 2025-12-24
**æ›´æ–°å†…å®¹**:
1. ä¿®æ­£ API è°ƒç”¨æµç¨‹ï¼Œä¿ç•™ getOrderTracking ç”¨äºè·å–ç‰©æµè¯æœ¯æ¨¡æ¿
2. ä¼˜åŒ–å•†å“çŠ¶æ€æ˜¾ç¤ºé€»è¾‘ï¼Œå¼ºåˆ¶ä½¿ç”¨ API è¿”å›çš„ delivery_status_zh/en å­—æ®µ
3. æ˜ç¡®ä¸¤ä¸ª API çš„åˆ†å·¥å’Œå­—æ®µæ¥æº
