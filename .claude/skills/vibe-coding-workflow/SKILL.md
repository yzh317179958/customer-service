---
name: vibe-coding-workflow
description: 执行 Fiido 的 Vibe Coding 开发方法论，分步开发、测试验证、文档更新的完整流程。当用户说"开始 Step"、"继续开发"、"执行下一步"时自动激活
---

# Vibe Coding 开发工作流

> **核心理念**："规划就是一切。不要让 AI 自主规划，否则你的代码库会变成一团乱麻。"

## 何时使用
- 用户说"开始 Step X"
- 用户说"继续开发"
- 用户说"执行下一步"
- 用户说"按照实现计划开发"

## 开始前必做（铁律）

**在开始编码前，必须先阅读并确认理解 memory-bank/ 中的文档：**

1. 阅读 `prd.md`（产品需求）
2. 阅读 `tech-stack.md`（技术栈）
3. 阅读 `implementation-plan.md`（实现计划）
4. 阅读 `progress.md`（了解之前完成的工作）
5. 阅读 `architecture.md`（了解当前架构）

如果 implementation-plan.md 不够清晰，**必须向用户提问澄清**。

## 执行单个 Step 的标准流程

```
1️⃣ 阅读 memory-bank/ 中的所有文档
2️⃣ 查看 progress.md 了解之前完成的工作
3️⃣ 执行实现计划的 Step [N]
4️⃣ 只做当前步骤要求的内容，不要超前
5️⃣ 如果有疑问，先问用户
6️⃣ 告知用户如何测试
7️⃣ 等待测试结果，测试通过前不开始下一步
```

## 测试验证

| 测试结果 | Claude 操作 |
|----------|-------------|
| 测试通过 | 更新 progress.md + architecture.md，告知可继续下一步 |
| 测试失败 | 分析错误原因并修复，不继续下一步 |

## 文档更新模板

### progress.md 每步完成后追加：

```markdown
---

## Step [N]: [步骤标题]

**完成时间:** YYYY-MM-DD HH:MM
**版本号:** vX.X.X

**完成内容:**
- [具体做了什么]
- [创建/修改了哪些文件]

**测试结果:**
- ✅ [测试项1] 通过
- ✅ [测试项2] 通过

**备注:**
- [遇到的问题及解决方案]
```

### architecture.md 每新增文件后追加：

```markdown
---

## [文件路径]

**用途:** [这个文件做什么]

**主要函数/组件:**
- `functionName()` - 功能描述

**依赖关系:**
- 依赖: [依赖哪些文件]
- 被依赖: [被哪些文件使用]
```

## 完整工作流循环

```
┌─────────────────────────────────────────────────────┐
│  1. 阅读文档 → 执行 Step N                           │
│         ↓                                           │
│  2. 测试验证                                        │
│         ↓                                           │
│  3. 通过? ─── 否 ──→ 修复 ──→ 返回步骤 2             │
│         │                                           │
│        是                                           │
│         ↓                                           │
│  4. 更新 progress.md + architecture.md              │
│         ↓                                           │
│  5. Git commit + tag                                │
│         ↓                                           │
│  6. 还有步骤? ─── 是 ──→ 返回步骤 1                  │
│         │                                           │
│        否                                           │
│         ↓                                           │
│  7. 功能完成！                                      │
└─────────────────────────────────────────────────────┘
```

## 每个步骤完成后的检查清单

- [ ] 测试验证通过
- [ ] 更新 `progress.md`
- [ ] 更新 `architecture.md`
- [ ] Git commit
- [ ] Git tag
- [ ] 告知用户可继续下一步

## 问题处理

| 场景 | 处理方式 |
|------|----------|
| Bug 修复 | 分析错误原因 → 修复 → 重新测试 → 不继续下一步 |
| 代码回滚 | 使用 `git reset --hard HEAD~1` |
| 卡住时 | 向用户说明尝试过的方法、当前状态，请求帮助分析 |

## 禁止事项（铁律）

- ❌ 禁止跳过测试就提交代码
- ❌ 禁止一次改动太多文件（>10 个）
- ❌ 禁止一次改动太多代码（>500 行）
- ❌ 禁止忘记更新文档
- ❌ 禁止未经用户确认就提交代码
- ❌ 禁止未经用户确认就部署到服务器
